<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="\\n：设置文档的标题 参考链接 面向产品经理的Emacs系列教程 remacs的世界\nremacs的世界\n面向产品经理的Emacs系列教程配套配置文件 面向产品经理的Emacs系列教程配套配置文件\nearly-init.el 在Emacs刚启动，还未加载主要配置文件时的配置文件。\n在 Emacs Lisp 中，可以使用 functionp 函数来判断一个符号是否绑定到一个函数上。functionp 函数用于检查一个对象是否是一个函数。如果对象是一个函数，functionp 将返回 t，否则返回 nil。\n下面是一个示例代码，演示了如何使用 if 条件判断函数是否存在：\n1 2 3 (if (functionp &#39;g-org-insert-note-header) (message &#34;函数 g-org-insert-note-header 存在&#34;) (message &#34;函数 g-org-insert-note-header 不存在&#34;)) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 ;;; early-init.el --- Emacs pre-initialization config -*- lexical-binding: t -*- ;;; Commentary: ;;; Code: ;; 设置垃圾回收参数 (setq gc-cons-threshold most-positive-fixnum) (setq gc-cons-percentage 0.6) ;; 启动早期不加载`package.el&#39;包管理器 (setq package-enable-at-startup nil) ;; 不从包缓存中加载 (setq package-quickstart nil) ;; 禁止展示菜单栏、工具栏和纵向滚动条 (push &#39;(menu-bar-lines . 0) default-frame-alist) (push &#39;(tool-bar-lines . 0) default-frame-alist) (push &#39;(vertical-scroll-bars) default-frame-alist) ;; 禁止自动缩放窗口先 (setq frame-inhibit-implied-resize t) ;; 禁止Echo Area显示For information about GNU Emacs and the GNU system,type C-h C-a (fset &#39;display-startup-echo-area-message &#39;ignore) ;; 禁止菜单栏、工具栏、滚动条模式，禁止启动屏幕和文件对话框 (menu-bar-mode -1) (if(functionp &#39;scroll-bar-mode) (scroll-bar-mode -1)) (if(functionp &#39;toogle-menu-bar) (toogle-menu-bar -1) ) (if(functionp &#39;tool-bar-mode) (tool-bar-mode -1) ) (setq inhibit-splash-screen t) (setq use-file-dialog nil) ;; 在这个阶段不编译 (setq comp-deferred-compilation nil) (setq frame-title-format &#34;emacs@%b&#34;) ;;在标题栏显示buffer的名字，而不是 emacs@wangyin.com 这样没用的提示。 (provide &#39;early-init) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; early-init.el ends here init.el init.el 是Emacs的主要配置文件。\n">
<title>remacs.org</title>

<link rel='canonical' href='https://ynhugo.github.io/p/remacs.org/'>

<link rel="stylesheet" href="/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css"><meta property='og:title' content="remacs.org">
<meta property='og:description' content="\\n：设置文档的标题 参考链接 面向产品经理的Emacs系列教程 remacs的世界\nremacs的世界\n面向产品经理的Emacs系列教程配套配置文件 面向产品经理的Emacs系列教程配套配置文件\nearly-init.el 在Emacs刚启动，还未加载主要配置文件时的配置文件。\n在 Emacs Lisp 中，可以使用 functionp 函数来判断一个符号是否绑定到一个函数上。functionp 函数用于检查一个对象是否是一个函数。如果对象是一个函数，functionp 将返回 t，否则返回 nil。\n下面是一个示例代码，演示了如何使用 if 条件判断函数是否存在：\n1 2 3 (if (functionp &#39;g-org-insert-note-header) (message &#34;函数 g-org-insert-note-header 存在&#34;) (message &#34;函数 g-org-insert-note-header 不存在&#34;)) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 ;;; early-init.el --- Emacs pre-initialization config -*- lexical-binding: t -*- ;;; Commentary: ;;; Code: ;; 设置垃圾回收参数 (setq gc-cons-threshold most-positive-fixnum) (setq gc-cons-percentage 0.6) ;; 启动早期不加载`package.el&#39;包管理器 (setq package-enable-at-startup nil) ;; 不从包缓存中加载 (setq package-quickstart nil) ;; 禁止展示菜单栏、工具栏和纵向滚动条 (push &#39;(menu-bar-lines . 0) default-frame-alist) (push &#39;(tool-bar-lines . 0) default-frame-alist) (push &#39;(vertical-scroll-bars) default-frame-alist) ;; 禁止自动缩放窗口先 (setq frame-inhibit-implied-resize t) ;; 禁止Echo Area显示For information about GNU Emacs and the GNU system,type C-h C-a (fset &#39;display-startup-echo-area-message &#39;ignore) ;; 禁止菜单栏、工具栏、滚动条模式，禁止启动屏幕和文件对话框 (menu-bar-mode -1) (if(functionp &#39;scroll-bar-mode) (scroll-bar-mode -1)) (if(functionp &#39;toogle-menu-bar) (toogle-menu-bar -1) ) (if(functionp &#39;tool-bar-mode) (tool-bar-mode -1) ) (setq inhibit-splash-screen t) (setq use-file-dialog nil) ;; 在这个阶段不编译 (setq comp-deferred-compilation nil) (setq frame-title-format &#34;emacs@%b&#34;) ;;在标题栏显示buffer的名字，而不是 emacs@wangyin.com 这样没用的提示。 (provide &#39;early-init) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; early-init.el ends here init.el init.el 是Emacs的主要配置文件。\n">
<meta property='og:url' content='https://ynhugo.github.io/p/remacs.org/'>
<meta property='og:site_name' content='ynhugo'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='emacs' /><meta property='article:published_time' content='2024-03-26T00:55:07&#43;08:00'/><meta property='article:modified_time' content='2024-03-26T00:55:07&#43;08:00'/>
<meta name="twitter:title" content="remacs.org">
<meta name="twitter:description" content="\\n：设置文档的标题 参考链接 面向产品经理的Emacs系列教程 remacs的世界\nremacs的世界\n面向产品经理的Emacs系列教程配套配置文件 面向产品经理的Emacs系列教程配套配置文件\nearly-init.el 在Emacs刚启动，还未加载主要配置文件时的配置文件。\n在 Emacs Lisp 中，可以使用 functionp 函数来判断一个符号是否绑定到一个函数上。functionp 函数用于检查一个对象是否是一个函数。如果对象是一个函数，functionp 将返回 t，否则返回 nil。\n下面是一个示例代码，演示了如何使用 if 条件判断函数是否存在：\n1 2 3 (if (functionp &#39;g-org-insert-note-header) (message &#34;函数 g-org-insert-note-header 存在&#34;) (message &#34;函数 g-org-insert-note-header 不存在&#34;)) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 ;;; early-init.el --- Emacs pre-initialization config -*- lexical-binding: t -*- ;;; Commentary: ;;; Code: ;; 设置垃圾回收参数 (setq gc-cons-threshold most-positive-fixnum) (setq gc-cons-percentage 0.6) ;; 启动早期不加载`package.el&#39;包管理器 (setq package-enable-at-startup nil) ;; 不从包缓存中加载 (setq package-quickstart nil) ;; 禁止展示菜单栏、工具栏和纵向滚动条 (push &#39;(menu-bar-lines . 0) default-frame-alist) (push &#39;(tool-bar-lines . 0) default-frame-alist) (push &#39;(vertical-scroll-bars) default-frame-alist) ;; 禁止自动缩放窗口先 (setq frame-inhibit-implied-resize t) ;; 禁止Echo Area显示For information about GNU Emacs and the GNU system,type C-h C-a (fset &#39;display-startup-echo-area-message &#39;ignore) ;; 禁止菜单栏、工具栏、滚动条模式，禁止启动屏幕和文件对话框 (menu-bar-mode -1) (if(functionp &#39;scroll-bar-mode) (scroll-bar-mode -1)) (if(functionp &#39;toogle-menu-bar) (toogle-menu-bar -1) ) (if(functionp &#39;tool-bar-mode) (tool-bar-mode -1) ) (setq inhibit-splash-screen t) (setq use-file-dialog nil) ;; 在这个阶段不编译 (setq comp-deferred-compilation nil) (setq frame-title-format &#34;emacs@%b&#34;) ;;在标题栏显示buffer的名字，而不是 emacs@wangyin.com 这样没用的提示。 (provide &#39;early-init) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; early-init.el ends here init.el init.el 是Emacs的主要配置文件。\n">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_f509edb42ecc0ebd.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🍥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ynhugo</a></h1>
            <h2 class="site-description">ynhugo.github.io</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://x.com'
                        target="_blank"
                        title="x"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="https://ynhugo.github.io/en/" >English</option>
                                
                                    <option value="https://ynhugo.github.io/" selected>中文</option>
                                
                                    <option value="https://ynhugo.github.io/ar/" >عربي</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
<ul>
<li><a href="#headline-1">参考链接</a>
<ul>
<li><a href="#headline-2">面向产品经理的Emacs系列教程</a>
</li>
<li><a href="#headline-3">面向产品经理的Emacs系列教程配套配置文件</a>
</li>
</ul>
</li>
<li><a href="#headline-4">early-init.el</a>
</li>
<li><a href="#headline-5">init.el</a>
<ul>
<li><a href="#headline-6">init.el 文件头</a>
</li>
<li><a href="#headline-7">package包管理配置</a>
</li>
<li><a href="#headline-8">安装use-package插件</a>
</li>
<li><a href="#headline-9">quelpa包管理器</a>
<ul>
<li><a href="#headline-10">示例1 常规操作</a>
</li>
<li><a href="#headline-11">示例2 github访问不了，使用项目镜像链接</a>
</li>
</ul>
</li>
<li><a href="#headline-12">加载模块化配置</a>
</li>
<li><a href="#headline-13">init.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-14">init-ui.el</a>
<ul>
<li><a href="#headline-15">init-ui.el 文件头</a>
</li>
<li><a href="#headline-16">spacemacs-theme主题</a>
</li>
<li><a href="#headline-17">其他UI零散设置项</a>
</li>
<li><a href="#headline-18">编码设置</a>
</li>
<li><a href="#headline-19">keycast按键展示</a>
</li>
<li><a href="#headline-20">shackle窗口管理</a>
</li>
<li><a href="#headline-21">popper窗口弹出管理</a>
</li>
<li><a href="#headline-22">winner窗口管理</a>
</li>
<li><a href="#headline-23">init-ui.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-24">init-base.el</a>
<ul>
<li><a href="#headline-25">init-base.el 文件头</a>
</li>
<li><a href="#headline-26">savehist记住迷你缓冲区历史</a>
</li>
<li><a href="#headline-27">saveplace记住每个文件的光标位置</a>
</li>
<li><a href="#headline-28">undo-tree撤销设置</a>
</li>
<li><a href="#headline-29">super-save自动保存</a>
</li>
<li><a href="#headline-30">init-base.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-31">init-edit.el</a>
<ul>
<li><a href="#headline-32">init-edit.el 文件头</a>
</li>
<li><a href="#headline-33">Emacs备份设置</a>
</li>
<li><a href="#headline-34">解除一些不常用的快捷键</a>
</li>
<li><a href="#headline-35">delsel选择文本输入时直接替换</a>
</li>
<li><a href="#headline-36">自动重载设置</a>
</li>
<li><a href="#headline-37">avy光标移动</a>
</li>
<li><a href="#headline-38">amx 记录命令历史</a>
</li>
<li><a href="#headline-39">window-numbering 快捷键切换窗口</a>
</li>
<li><a href="#headline-40">mwim 优化光标移动到行首/行尾</a>
</li>
<li><a href="#headline-41">dashboard 配置欢迎页面</a>
<ul>
<li><a href="#headline-42">projectile</a>
</li>
</ul>
</li>
<li><a href="#headline-43">marginalia 为 Emacs minibuffer 中的选项添加注解</a>
</li>
<li><a href="#headline-44">which-key 根据快捷键前缀提示快捷键</a>
</li>
<li><a href="#headline-45">hydra 把一组特定场景的命令组织到一起， 通过简单按键来进行调用</a>
<ul>
<li><a href="#headline-46">use-package-hydra</a>
</li>
</ul>
</li>
<li><a href="#headline-47">multiple-cursors多光标编辑</a>
</li>
<li><a href="#headline-48">highlight-symbol 高亮出当前 Buffer 中所有的、与光标所在处的符号相同的符号</a>
</li>
<li><a href="#headline-49">rainbow-delimiters 用不同颜色标记多级括号，方便看清代码块</a>
</li>
<li><a href="#headline-50">evil（为 Vim 用户）</a>
</li>
<li><a href="#headline-51">WorkLogReport 工作日志报告</a>
</li>
<li><a href="#headline-52">g-org-insert-note-header 插入一些 Org 模式的头部信息</a>
</li>
<li><a href="#headline-53">g-org-emacs-lisp-code-block 插入emacs-lisp代码块</a>
</li>
<li><a href="#headline-54">g-org-c-code-block 插入C语言代码块</a>
</li>
<li><a href="#headline-55">g-org-bash-code-block 插入bash语言的代码块</a>
</li>
<li><a href="#headline-56">g-org-html-code-block 插入html语言的代码块</a>
</li>
<li><a href="#headline-57">markdown</a>
</li>
<li><a href="#headline-58">init-edit.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-59">init-org.el</a>
<ul>
<li><a href="#headline-60">init-org.el 文件头</a>
</li>
<li><a href="#headline-61">org-appear自动展开强调链接</a>
</li>
<li><a href="#headline-62">org-auto-tangle自动tangle设置</a>
</li>
<li><a href="#headline-63">org-capture快速记录设置</a>
</li>
<li><a href="#headline-64">denote笔记设置</a>
</li>
<li><a href="#headline-65">consult-notes查找笔记</a>
</li>
<li><a href="#headline-66">org-super-links反链设置</a>
</li>
<li><a href="#headline-67">ox文件导出通用设置</a>
</li>
<li><a href="#headline-68">org导出后端设置</a>
<ul>
<li><a href="#headline-69">ox-html导出HTML设置</a>
</li>
<li><a href="#headline-70">ox-latex导出PDF设置</a>
</li>
<li><a href="#headline-71">ox-gfm导出Markdown设置</a>
</li>
<li><a href="#headline-72">ox-publish导出静态站点设置</a>
</li>
<li><a href="#headline-73">ox-hugo导出博客设置</a>
</li>
</ul>
</li>
<li><a href="#headline-74">toc-org目录自动生成</a>
</li>
<li><a href="#headline-75">ol新增链接类型</a>
</li>
<li><a href="#headline-76">图片粘贴</a>
</li>
<li><a href="#headline-77">init-org.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-78">init-completion.el</a>
<ul>
<li><a href="#headline-79">init-completion.el 文件头</a>
</li>
<li><a href="#headline-80">vertico 提供了一个垂直样式的补全系统</a>
</li>
<li><a href="#headline-81">orderless 插件提供一种无序的补全新姿势，将一个搜索的范式变成数个以空格分隔的部分</a>
</li>
<li><a href="#headline-82">marginalia 给迷你缓冲区的补全候选条目添加一些提示</a>
</li>
<li><a href="#headline-83">consult 基于Emacs自带的补全机制，提供了一系列的补全命令</a>
</li>
<li><a href="#headline-84">company Emacs最广为使用的补全插件</a>
</li>
<li><a href="#headline-85">yasnippet模板补全</a>
<ul>
<li><a href="#headline-86">css for html export</a>
</li>
<li><a href="#headline-87">emacslisp</a>
</li>
</ul>
</li>
<li><a href="#headline-88">embark 插件提供了一系列的迷你缓冲区的类似右键机制的增强</a>
</li>
<li><a href="#headline-89">init-completion.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-90">init-dired.el</a>
<ul>
<li><a href="#headline-91">init-dired.el 文件头</a>
</li>
<li><a href="#headline-92">init-dired.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-93">init-tools.el</a>
<ul>
<li><a href="#headline-94">init-tools.el 文件头</a>
</li>
<li><a href="#headline-95">helpful帮助增强</a>
</li>
<li><a href="#headline-96">pass密码管理</a>
</li>
<li><a href="#headline-97">cnfonts 用于缩放字体</a>
</li>
<li><a href="#headline-98">bhj-fonts字体配置</a>
</li>
<li><a href="#headline-99">init-tools.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-100">init-rss.el</a>
<ul>
<li><a href="#headline-101">init-rss.el 文件头</a>
</li>
<li><a href="#headline-102">elfeed 一个非常棒的RSS新闻阅读客户端</a>
</li>
<li><a href="#headline-103">elfeed-goodies给elfeed优化增强</a>
</li>
<li><a href="#headline-104">init-rss.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-105">init-shell.el</a>
<ul>
<li><a href="#headline-106">init-shell.el 文件头</a>
</li>
<li><a href="#headline-107">eshell 基本配置</a>
</li>
<li><a href="#headline-108">eshell alias 设置</a>
</li>
<li><a href="#headline-109">eshell 里的 C-d</a>
</li>
<li><a href="#headline-110">Eshell 的命令历史</a>
</li>
<li><a href="#headline-111">有些命令使用 term</a>
</li>
<li><a href="#headline-112">eshell-git-prompt 命令行主题</a>
</li>
<li><a href="#headline-113">eshell-syntax-highlighting 语法高亮</a>
</li>
<li><a href="#headline-114">capf-autosuggest自动补全</a>
</li>
<li><a href="#headline-115">eshell-up快速进入父级文件夹</a>
</li>
<li><a href="#headline-116">init-shell.el 文件尾</a>
</li>
</ul>
</li>
<li><a href="#headline-117">init-browser.el</a>
<ul>
<li><a href="#headline-118">init-browser.el 文件头</a>
</li>
<li><a href="#headline-119">EWW 配置</a>
</li>
<li><a href="#headline-120">init-browser.el 文件尾</a>
</li>
</ul>
</li>
</ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/remacs.org/">remacs.org</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 26, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 36 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 class="title">\n：设置文档的标题</h1>

<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
参考链接
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
面向产品经理的Emacs系列教程
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>
<a href="https://remacs.cc/">remacs的世界</a></p>
<p>
<a href="https://remacs.fun/">remacs的世界</a></p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
面向产品经理的Emacs系列教程配套配置文件
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>
<a href="https://github.com/wowhxj/emacs-from-scratch">面向产品经理的Emacs系列教程配套配置文件</a></p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
early-init.el
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>
在Emacs刚启动，还未加载主要配置文件时的配置文件。</p>
<p>
在 Emacs Lisp 中，可以使用 functionp 函数来判断一个符号是否绑定到一个函数上。functionp 函数用于检查一个对象是否是一个函数。如果对象是一个函数，functionp 将返回 t，否则返回 nil。</p>
<p>
下面是一个示例代码，演示了如何使用 if 条件判断函数是否存在：</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">functionp</span> <span class="ss">&#39;g-org-insert-note-header</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;函数 g-org-insert-note-header 存在&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nf">message</span> <span class="s">&#34;函数 g-org-insert-note-header 不存在&#34;</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">	 <span class="c1">;;; early-init.el --- Emacs pre-initialization config -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">	 <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	 <span class="c1">;;; Code:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 设置垃圾回收参数</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-threshold</span> <span class="nv">most-positive-fixnum</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">gc-cons-percentage</span> <span class="mf">0.6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 启动早期不加载`package.el&#39;包管理器</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">package-enable-at-startup</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; 不从包缓存中加载</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">package-quickstart</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 禁止展示菜单栏、工具栏和纵向滚动条</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">menu-bar-lines</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">default-frame-alist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">tool-bar-lines</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">default-frame-alist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">push</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">vertical-scroll-bars</span><span class="p">)</span> <span class="nv">default-frame-alist</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 禁止自动缩放窗口先</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">frame-inhibit-implied-resize</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 禁止Echo Area显示For information about GNU Emacs and the GNU system,type C-h C-a</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">fset</span> <span class="ss">&#39;display-startup-echo-area-message</span> <span class="ss">&#39;ignore</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 禁止菜单栏、工具栏、滚动条模式，禁止启动屏幕和文件对话框</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">menu-bar-mode</span> <span class="mi">-1</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">if</span><span class="p">(</span><span class="nf">functionp</span> <span class="ss">&#39;scroll-bar-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">scroll-bar-mode</span> <span class="mi">-1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">if</span><span class="p">(</span><span class="nf">functionp</span> <span class="ss">&#39;toogle-menu-bar</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">toogle-menu-bar</span> <span class="mi">-1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">if</span><span class="p">(</span><span class="nf">functionp</span> <span class="ss">&#39;tool-bar-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">tool-bar-mode</span> <span class="mi">-1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">inhibit-splash-screen</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">use-file-dialog</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 在这个阶段不编译</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">comp-deferred-compilation</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">frame-title-format</span> <span class="s">&#34;emacs@%b&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;在标题栏显示buffer的名字，而不是 emacs@wangyin.com 这样没用的提示。</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;early-init</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	 <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">	 <span class="c1">;;; early-init.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
init.el
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p><code class="verbatim">init.el</code> 是Emacs的主要配置文件。</p>
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
init.el 文件头
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init.el --- The main init entry for Emacs -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-7" class="outline-3">
<h3 id="headline-7">
package包管理配置
</h3>
<div id="outline-text-headline-7" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;package</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">package-archives</span>
</span></span><span class="line"><span class="cl">		<span class="o">&#39;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="s">&#34;melpa-cn&#34;</span> <span class="o">.</span> <span class="s">&#34;https://mirrors.ustc.edu.cn/elpa/melpa/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="s">&#34;nongnu-cn&#34;</span>   <span class="o">.</span> <span class="s">&#34;https://mirrors.ustc.edu.cn/elpa/nongnu/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="s">&#34;gnu-cn&#34;</span>   <span class="o">.</span> <span class="s">&#34;https://mirrors.ustc.edu.cn/elpa/gnu/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		  <span class="c1">;; (&#34;melpa&#34;  . &#34;https://melpa.org/packages/&#34;)</span>
</span></span><span class="line"><span class="cl">		  <span class="c1">;; (&#34;gnu&#34;    . &#34;https://elpa.gnu.org/packages/&#34;)</span>
</span></span><span class="line"><span class="cl">		  <span class="c1">;; (&#34;nongnu&#34; . &#34;https://elpa.nongnu.org/nongnu/&#34;)</span>
</span></span><span class="line"><span class="cl">		  <span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">package-initialize</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-8" class="outline-3">
<h3 id="headline-8">
安装use-package插件
</h3>
<div id="outline-text-headline-8" class="outline-text-3">
<p><a href="https://github.com/jwiegley/use-package">use-package</a> 是一个让Emacs配置更加结构化更加清晰的一个宏插件。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; 安装 `use-package&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nv">package-installed-p</span> <span class="ss">&#39;use-package</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">package-refresh-contents</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">package-install</span> <span class="ss">&#39;use-package</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 配置 `use-package&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">eval-and-compile</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">use-package-always-ensure</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">use-package-always-defer</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">use-package-expand-minimally</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">use-package-enable-imenu-support</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">daemonp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">setq</span> <span class="nv">use-package-always-demand</span> <span class="no">t</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">eval-when-compile</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;use-package</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 安装 `use-package&#39; 的集成模块</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">use-package-ensure-system-package</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">diminish</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">bind-key</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-9" class="outline-3">
<h3 id="headline-9">
quelpa包管理器
</h3>
<div id="outline-text-headline-9" class="outline-text-3">
<p>
<a href="https://github.com/quelpa/quelpa">quelpa</a> 是配合 <code class="verbatim">package.el</code> 使用的，基于git的一个包管理器。</p>
<p>
使用示例：</p>
<div id="outline-container-headline-10" class="outline-4">
<h4 id="headline-10">
示例1 常规操作
</h4>
<div id="outline-text-headline-10" class="outline-text-4">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-super-links</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:quelpa</span> <span class="p">(</span><span class="nv">org-super-links</span> <span class="nb">:fetcher</span> <span class="nv">github</span> <span class="nb">:repo</span> <span class="s">&#34;toshism/org-super-links&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> 
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-11" class="outline-4">
<h4 id="headline-11">
示例2 github访问不了，使用项目镜像链接
</h4>
<div id="outline-text-headline-11" class="outline-text-4">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">quelpa</span>
</span></span><span class="line"><span class="cl">   <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-super-liks</span>
</span></span><span class="line"><span class="cl">	 <span class="nb">:fetcher</span> <span class="nv">git</span>
</span></span><span class="line"><span class="cl">	 <span class="nb">:url</span> <span class="s">&#34;https://hub.nuaa.cf/toshism/org-super-links&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-super-links</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="nv">nil</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; 安装 `quelpa&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">quelpa</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:commands</span> <span class="nv">quelpa</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>  
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">quelpa-git-clone-depth</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">quelpa-update-melpa-p</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">quelpa-self-upgrade-p</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">quelpa-checkout-melpa-p</span> <span class="no">nil</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; `quelpa&#39; 与 `use-package&#39; 集成</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">quelpa-use-package</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-12" class="outline-3">
<h3 id="headline-12">
加载模块化配置
</h3>
<div id="outline-text-headline-12" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; 将lisp目录放到加载路径的前面以加快启动速度</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">dir</span> <span class="p">(</span><span class="nv">locate-user-emacs-file</span> <span class="s">&#34;lisp&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;load-path</span> <span class="p">(</span><span class="nf">file-name-as-directory</span> <span class="nv">dir</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 加载各模块化配置</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; 不要在`*message*&#39;缓冲区显示加载模块化配置的信息</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">with-temp-message</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-base</span><span class="p">)</span>                  <span class="c1">; 一些基本配置</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-ui</span><span class="p">)</span>                    <span class="c1">; UI交互</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-edit</span><span class="p">)</span>                  <span class="c1">; 编辑行为</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-completion</span><span class="p">)</span>            <span class="c1">; 补全系统</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-dired</span><span class="p">)</span>                 <span class="c1">; 文件管理</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-tools</span><span class="p">)</span>                 <span class="c1">; 相关工具</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-org</span><span class="p">)</span>                   <span class="c1">; org相关设置</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-rss</span><span class="p">)</span>                   <span class="c1">; RSS配置</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-shell</span><span class="p">)</span>                 <span class="c1">; Shell配置</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;init-browser</span><span class="p">)</span>               <span class="c1">; 浏览器配置</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-13" class="outline-3">
<h3 id="headline-13">
init.el 文件尾
</h3>
<div id="outline-text-headline-13" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-14" class="outline-2">
<h2 id="headline-14">
init-ui.el
</h2>
<div id="outline-text-headline-14" class="outline-text-2">
<div id="outline-container-headline-15" class="outline-3">
<h3 id="headline-15">
init-ui.el 文件头
</h3>
<div id="outline-text-headline-15" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-ui.el --- UI settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-16" class="outline-3">
<h3 id="headline-16">
spacemacs-theme主题
</h3>
<div id="outline-text-headline-16" class="outline-text-3">
<p><a href="https://github.com/nashamri/spacemacs-theme">spacemacs-theme</a> 是我非常喜欢的一个主题包。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">spacemacs-theme</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">load-theme</span> <span class="ss">&#39;spacemacs-dark</span> <span class="no">t</span><span class="p">)</span>  <span class="c1">; Dark theme</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; 或者</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; (load-theme &#39;spacemacs-light t) ; Light theme</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-17" class="outline-3">
<h3 id="headline-17">
其他UI零散设置项
</h3>
<div id="outline-text-headline-17" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; 禁用一些GUI特性</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">use-dialog-box</span> <span class="no">nil</span><span class="p">)</span>               <span class="c1">; 鼠标操作不使用对话框</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">inhibit-default-init</span> <span class="no">t</span><span class="p">)</span>           <span class="c1">; 不加载 `default&#39; 库</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">inhibit-startup-screen</span> <span class="no">t</span><span class="p">)</span>         <span class="c1">; 不加载启动画面</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">inhibit-startup-message</span> <span class="no">t</span><span class="p">)</span>        <span class="c1">; 不加载启动消息</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">inhibit-startup-buffer-menu</span> <span class="no">t</span><span class="p">)</span>    <span class="c1">; 不显示缓冲区列表</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; ;; 草稿缓冲区默认文字设置</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (setq initial-scratch-message (concat &#34;;; Happy hacking, &#34;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;                                       (capitalize user-login-name) &#34; - Emacs ♥ you!\n\n&#34;))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 设置缓冲区的文字方向为从左到右</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">bidi-paragraph-direction</span> <span class="ss">&#39;left-to-right</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; 禁止使用双向括号算法</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (setq bidi-inhibit-bpa t)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 设置自动折行宽度为80个字符，默认值为70</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq-default</span> <span class="nv">fill-column</span> <span class="mi">80</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 设置大文件阈值为100MB，默认10MB</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">large-file-warning-threshold</span> <span class="mi">100000000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; ;; 以16进制显示字节数</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (setq display-raw-bytes-as-hex t)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; 有输入时禁止 `fontification&#39; 相关的函数钩子，能让滚动更顺滑</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">redisplay-skip-fontification-on-input</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 禁止响铃</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">ring-bell-function</span> <span class="ss">&#39;ignore</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 禁止闪烁光标</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">blink-cursor-mode</span> <span class="mi">-1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 在光标处而非鼠标所在位置粘贴</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">mouse-yank-at-point</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 拷贝粘贴设置</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">select-enable-primary</span> <span class="no">nil</span><span class="p">)</span>        <span class="c1">; 选择文字时不拷贝</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">select-enable-clipboard</span> <span class="no">t</span><span class="p">)</span>        <span class="c1">; 拷贝时使用剪贴板</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 鼠标滚动设置</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">scroll-step</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">scroll-margin</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">hscroll-step</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">hscroll-margin</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">scroll-conservatively</span> <span class="mi">101</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">scroll-up-aggressively</span> <span class="mf">0.01</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">scroll-down-aggressively</span> <span class="mf">0.01</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">scroll-preserve-screen-position</span> <span class="ss">&#39;always</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 对于高的行禁止自动垂直滚动</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">auto-window-vscroll</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 设置新分屏打开的位置的阈值</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">split-width-threshold</span> <span class="p">(</span><span class="nv">assoc-default</span> <span class="ss">&#39;width</span> <span class="nv">default-frame-alist</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">split-height-threshold</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; TAB键设置，在Emacs里不使用TAB键，所有的TAB默认为4个空格</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (setq-default indent-tabs-mode nil)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (setq-default tab-width 4)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq-default</span> <span class="nv">indent-tabs-mode</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq-default</span> <span class="nv">tab-width</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">c-default-style</span> <span class="s">&#34;linux&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">c-basic-offset</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; yes或no提示设置，通过下面这个函数设置当缓冲区名字匹配到预设的字符串时自动回答yes</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">original-y-or-n-p</span> <span class="ss">&#39;y-or-n-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defalias</span> <span class="ss">&#39;original-y-or-n-p</span> <span class="p">(</span><span class="nf">symbol-function</span> <span class="ss">&#39;y-or-n-p</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">default-yes-sometimes</span> <span class="p">(</span><span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;automatically say y when buffer name match following string&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nb">or</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;has a running process&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;does not exist; create&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;modified; kill anyway&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;Delete buffer using&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;Kill buffer of&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;still connected.  Kill it?&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;Shutdown the client&#39;s kernel&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;kill them and exit anyway&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;Revert buffer from file&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;Kill Dired buffer of&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;delete buffer using&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;Kill all pass entry&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;for all cursors&#34;</span> <span class="nv">prompt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">string-match</span> <span class="s">&#34;Do you want edit the entry&#34;</span> <span class="nv">prompt</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="no">t</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">original-y-or-n-p</span> <span class="nv">prompt</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defalias</span> <span class="ss">&#39;yes-or-no-p</span> <span class="ss">&#39;default-yes-sometimes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defalias</span> <span class="ss">&#39;y-or-n-p</span> <span class="ss">&#39;default-yes-sometimes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 设置剪贴板历史长度300，默认为60</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">kill-ring-max</span> <span class="mi">200</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 在剪贴板里不存储重复内容</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">kill-do-not-save-duplicates</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 设置位置记录长度为6，默认为16</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; 可以使用 `counsel-mark-ring&#39; or `consult-mark&#39; (C-x j) 来访问光标位置记录</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; 使用 C-x C-SPC 执行 `pop-global-mark&#39; 直接跳转到上一个全局位置处</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; 使用 C-u C-SPC 跳转到本地位置处</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">mark-ring-max</span> <span class="mi">6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">global-mark-ring-max</span> <span class="mi">6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 设置 emacs-lisp 的限制</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">max-lisp-eval-depth</span> <span class="mi">10000</span><span class="p">)</span>        <span class="c1">; 默认值为 800</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">max-specpdl-size</span> <span class="mi">10000</span><span class="p">)</span>           <span class="c1">; 默认值为 1600</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 启用 `list-timers&#39;, `list-threads&#39; 这两个命令</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">put</span> <span class="ss">&#39;list-timers</span> <span class="ss">&#39;disabled</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">put</span> <span class="ss">&#39;list-threads</span> <span class="ss">&#39;disabled</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 在命令行里支持鼠标</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">xterm-mouse-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 退出Emacs时进行确认</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">confirm-kill-emacs</span> <span class="ss">&#39;y-or-n-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 在模式栏上显示当前光标的列号</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">column-number-mode</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;org-mode-hook</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">setq</span> <span class="nv">truncate-lines</span> <span class="no">nil</span><span class="p">)))</span> <span class="c1">;自动换行(折行)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 显示行号</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">&gt;=</span> <span class="nv">emacs-major-version</span> <span class="mi">29</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">global-display-line-numbers-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">global-linum-mode</span> <span class="no">t</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">reload-emacs-config</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">load-file</span> <span class="s">&#34;~/.emacs.d/init.el&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c C-SPC&#34;</span><span class="p">)</span> <span class="ss">&#39;reload-emacs-config</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">close-current-window</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">delete-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c z&#34;</span><span class="p">)</span> <span class="ss">&#39;close-current-window</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-18" class="outline-3">
<h3 id="headline-18">
编码设置
</h3>
<div id="outline-text-headline-18" class="outline-text-3">
<p>
统一使用 UTF-8 编码。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; 配置编码</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">prefer-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq-default</span> <span class="nv">buffer-file-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-19" class="outline-3">
<h3 id="headline-19">
keycast按键展示
</h3>
<div id="outline-text-headline-19" class="outline-text-3">
<p>
<a href="https://github.com/tarsius/keycast">keycast mode</a> 插件可以在模式栏上展示所有的按键，以及对应的函数。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">keycast</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">keycast-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; :custom-face</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; (keycast-key ((t (:background &#34;#0030b4&#34; :weight bold))))</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; (keycast-command ((t (:foreground &#34;#0030b4&#34; :weight bold))))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; set for doom-modeline support</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; With the latest change 72d9add, mode-line-keycast needs to be modified to keycast-mode-line.</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">define-minor-mode</span> <span class="nv">keycast-mode</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;Show current command and its key binding in the mode line (fix for use with doom-mode-line).&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="nb">:global</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">if</span> <span class="nv">keycast-mode</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;pre-command-hook</span> <span class="ss">&#39;keycast--update</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;global-mode-string</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="nv">keycast-mode-line</span> <span class="s">&#34;  &#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nv">remove-hook</span> <span class="ss">&#39;pre-command-hook</span> <span class="ss">&#39;keycast--update</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">setq</span> <span class="nv">global-mode-string</span> <span class="p">(</span><span class="nf">delete</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;&#34;</span> <span class="nv">keycast-mode-line</span> <span class="s">&#34;  &#34;</span><span class="p">)</span> <span class="nv">global-mode-string</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">input</span> <span class="o">&#39;</span><span class="p">(</span><span class="nf">self-insert-command</span>
</span></span><span class="line"><span class="cl">					 <span class="nv">org-self-insert-command</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;keycast-substitute-alist</span> <span class="o">`</span><span class="p">(</span><span class="o">,</span><span class="nv">input</span> <span class="s">&#34;.&#34;</span> <span class="s">&#34;Typing…&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">event</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">mouse-event-p</span>
</span></span><span class="line"><span class="cl">					 <span class="nv">mouse-movement-p</span>
</span></span><span class="line"><span class="cl">					 <span class="nv">mwheel-scroll</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;keycast-substitute-alist</span> <span class="o">`</span><span class="p">(</span><span class="o">,</span><span class="nv">event</span> <span class="no">nil</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">keycast-log-format</span> <span class="s">&#34;%-20K%C\n&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">keycast-log-frame-alist</span>
</span></span><span class="line"><span class="cl">		  <span class="o">&#39;</span><span class="p">((</span><span class="nv">minibuffer</span> <span class="o">.</span> <span class="no">nil</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">keycast-log-newest-first</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-20" class="outline-3">
<h3 id="headline-20">
shackle窗口管理
</h3>
<div id="outline-text-headline-20" class="outline-text-3">
<p>
<a href="https://depp.brause.cc/shackle/">shackle</a> 插件能自定义窗口的弹出方式。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">shackle</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">shackle-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">shackle-lighter</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">shackle-select-reused-windows</span> <span class="no">nil</span><span class="p">)</span> <span class="c1">; default nil</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">shackle-default-alignment</span> <span class="ss">&#39;below</span><span class="p">)</span>  <span class="c1">; default below</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">shackle-default-size</span> <span class="mf">0.4</span><span class="p">)</span>          <span class="c1">; default 0.5</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">shackle-rules</span>
</span></span><span class="line"><span class="cl">		  <span class="c1">;; CONDITION(:regexp)            :select     :inhibit-window-quit   :size+:align|:other     :same|:popup</span>
</span></span><span class="line"><span class="cl">		  <span class="o">&#39;</span><span class="p">((</span><span class="nv">compilation-mode</span>              <span class="nb">:ignore</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;\\*Async Shell.*\\*&#34;</span> <span class="nb">:regexp</span> <span class="no">t</span> <span class="nb">:ignore</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;\\*corfu.*\\*&#34;</span>       <span class="nb">:regexp</span> <span class="no">t</span> <span class="nb">:ignore</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;*eshell*&#34;</span>                    <span class="nb">:select</span> <span class="no">t</span>                          <span class="nb">:size</span> <span class="mf">0.4</span>  <span class="nb">:align</span> <span class="no">t</span>     <span class="nb">:popup</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">helpful-mode</span>                  <span class="nb">:select</span> <span class="no">t</span>                          <span class="nb">:size</span> <span class="mf">0.6</span>  <span class="nb">:align</span> <span class="nv">right</span> <span class="nb">:popup</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;*Messages*&#34;</span>                  <span class="nb">:select</span> <span class="no">t</span>                          <span class="nb">:size</span> <span class="mf">0.4</span>  <span class="nb">:align</span> <span class="no">t</span>     <span class="nb">:popup</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;*Calendar*&#34;</span>                  <span class="nb">:select</span> <span class="no">t</span>                          <span class="nb">:size</span> <span class="mf">0.3</span>  <span class="nb">:align</span> <span class="no">t</span>     <span class="nb">:popup</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;*info*&#34;</span>                      <span class="nb">:select</span> <span class="no">t</span>                                                  <span class="nb">:same</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">magit-status-mode</span>             <span class="nb">:select</span> <span class="no">t</span>   <span class="nb">:inhibit-window-quit</span> <span class="no">t</span>                         <span class="nb">:same</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">magit-log-mode</span>                <span class="nb">:select</span> <span class="no">t</span>   <span class="nb">:inhibit-window-quit</span> <span class="no">t</span>                         <span class="nb">:same</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-21" class="outline-3">
<h3 id="headline-21">
popper窗口弹出管理
</h3>
<div id="outline-text-headline-21" class="outline-text-3">
<p>
我们通过 <a href="https://hub.nuaa.cf/karthink/popper">popper</a> 插件，来控制窗口的弹出行为，与 <a href="https://depp.brause.cc/shackle/">shackle</a> 一起配合使用。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">popper</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;M-`&#34;</span>     <span class="o">.</span> <span class="nv">popper-toggle-latest</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;M-&lt;tab&gt;&#34;</span> <span class="o">.</span> <span class="nv">popper-cycle</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;M-\\&#34;</span>    <span class="o">.</span> <span class="nv">popper-toggle-type</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">popper-reference-buffers</span>
</span></span><span class="line"><span class="cl">		  <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\*Messages\\*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;\\*Async Shell Command\\*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="nv">help-mode</span>
</span></span><span class="line"><span class="cl">			<span class="nv">helpful-mode</span>
</span></span><span class="line"><span class="cl">			<span class="nv">occur-mode</span>
</span></span><span class="line"><span class="cl">			<span class="nv">pass-view-mode</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;^\\*eshell.*\\*$&#34;</span> <span class="nv">eshell-mode</span> <span class="c1">;; eshell as a popup</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;^\\*shell.*\\*$&#34;</span>  <span class="nv">shell-mode</span>  <span class="c1">;; shell as a popup</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;\\*corfu\\*&#34;</span> <span class="o">.</span> <span class="nv">hide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">compilation-mode</span> <span class="o">.</span> <span class="nv">hide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; derived from `fundamental-mode&#39; and fewer than 10 lines will be considered a popup</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">buf</span><span class="p">)</span> <span class="p">(</span><span class="nb">with-current-buffer</span> <span class="nv">buf</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">derived-mode-p</span> <span class="ss">&#39;fundamental-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">								 <span class="p">(</span><span class="nf">&lt;</span> <span class="p">(</span><span class="nv">count-lines</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">									<span class="mi">10</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">		  <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">popper-mode</span> <span class="mi">+1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">popper-echo-mode</span> <span class="mi">+1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; group by project.el, projectile, directory or perspective</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">popper-group-function</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; pop in child frame or not</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">popper-display-function</span> <span class="nf">#&#39;</span><span class="nv">display-buffer-in-child-frame</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; use `shackle.el&#39; to control popup</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">popper-display-control</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-22" class="outline-3">
<h3 id="headline-22">
winner窗口管理
</h3>
<div id="outline-text-headline-22" class="outline-text-3">
<p>
内置的 <code class="verbatim">winner</code> 插件是一个窗口管理器，可以通过 <code class="verbatim">winner-undo</code> 和 <code class="verbatim">winner-redo</code> 命令恢复或重做窗口布局。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">winner</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">winner-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:commands</span> <span class="p">(</span><span class="nv">winner-undo</span> <span class="nv">winner-redo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">winner-boring-buffers</span>
</span></span><span class="line"><span class="cl">		  <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;*Completions*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;*Compile-Log*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;*inferior-lisp*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;*Fuzzy Completions*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;*Apropos*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;*Help*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;*cvs*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;*Buffer List*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;*Ibuffer*&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;*esh command on file*&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-23" class="outline-3">
<h3 id="headline-23">
init-ui.el 文件尾
</h3>
<div id="outline-text-headline-23" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-ui</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-ui.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-24" class="outline-2">
<h2 id="headline-24">
init-base.el
</h2>
<div id="outline-text-headline-24" class="outline-text-2">
<div id="outline-container-headline-25" class="outline-3">
<h3 id="headline-25">
init-base.el 文件头
</h3>
<div id="outline-text-headline-25" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-base.el --- Basical settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-26" class="outline-3">
<h3 id="headline-26">
savehist记住迷你缓冲区历史
</h3>
<div id="outline-text-headline-26" class="outline-text-3">
<p>记住迷你缓冲区历史。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">savehist</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">savehist-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; Allow commands in minibuffers, will affect `dired-do-dired-do-find-regexp-and-replace&#39; command:</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">enable-recursive-minibuffers</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">history-length</span> <span class="mi">1000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">savehist-additional-variables</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">mark-ring</span>
</span></span><span class="line"><span class="cl">										  <span class="nv">global-mark-ring</span>
</span></span><span class="line"><span class="cl">										  <span class="nv">search-ring</span>
</span></span><span class="line"><span class="cl">										  <span class="nv">regexp-search-ring</span>
</span></span><span class="line"><span class="cl">										  <span class="nv">extended-command-history</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">savehist-autosave-interval</span> <span class="mi">300</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-27" class="outline-3">
<h3 id="headline-27">
saveplace记住每个文件的光标位置
</h3>
<div id="outline-text-headline-27" class="outline-text-3">
<p>自动记住每个文件的最后一次访问的光标位置。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">saveplace</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">save-place-mode</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-28" class="outline-3">
<h3 id="headline-28">
undo-tree撤销设置
</h3>
<div id="outline-text-headline-28" class="outline-text-3">
<p>
<a href="https://www.dr-qubit.org/undo-tree.html">undo-tree</a> 插件可以提供一个可视化的撤销、重做系统，我们使用 <code class="verbatim">C-/</code> 来撤销，使用 <code class="verbatim">M-_</code> 来重做。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">undo-tree</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">global-undo-tree-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; don&#39;t save undo history to local files</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">undo-tree-auto-save-history</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-29" class="outline-3">
<h3 id="headline-29">
super-save自动保存
</h3>
<div id="outline-text-headline-29" class="outline-text-3">
<p>
<a href="https://hub.nuaa.cf/bbatsov/super-save">super-save</a> 插件能自动保存缓冲区。它可以设置在某些行为（如窗口切换、或窗口空闲一段时间）下自动保存。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">super-save</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">super-save-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; Emacs空闲是否自动保存，这里不设置</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">super-save-auto-save-when-idle</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; 切换窗口自动保存</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;super-save-triggers</span> <span class="ss">&#39;other-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; 查找文件时自动保存</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;super-save-hook-triggers</span> <span class="ss">&#39;find-file-hook</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; 远程文件编辑不自动保存</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">super-save-remote-files</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; 特定后缀名的文件不自动保存</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">super-save-exclude</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;.gpg&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; 自动保存时，保存所有缓冲区</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">super-save/save-all-buffers</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">save-excursion</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">buf</span> <span class="p">(</span><span class="nf">buffer-list</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nf">set-buffer</span> <span class="nv">buf</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="nf">buffer-file-name</span>
</span></span><span class="line"><span class="cl">					 <span class="p">(</span><span class="nf">buffer-modified-p</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">					 <span class="p">(</span><span class="nf">file-writable-p</span> <span class="nf">buffer-file-name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					 <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">file-remote-p</span> <span class="nf">buffer-file-name</span><span class="p">)</span> <span class="nv">super-save-remote-files</span> <span class="no">t</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">save-buffer</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">advice-add</span> <span class="ss">&#39;super-save-command</span> <span class="nb">:override</span> <span class="ss">&#39;super-save/save-all-buffers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-30" class="outline-3">
<h3 id="headline-30">
init-base.el 文件尾
</h3>
<div id="outline-text-headline-30" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-base</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-base.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-31" class="outline-2">
<h2 id="headline-31">
init-edit.el
</h2>
<div id="outline-text-headline-31" class="outline-text-2">
<div id="outline-container-headline-32" class="outline-3">
<h3 id="headline-32">
init-edit.el 文件头
</h3>
<div id="outline-text-headline-32" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-edit.el --- Editing settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-33" class="outline-3">
<h3 id="headline-33">
Emacs备份设置
</h3>
<div id="outline-text-headline-33" class="outline-text-3">
<p>
不使用Emacs的自动备份设置。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">make-backup-files</span> <span class="no">nil</span><span class="p">)</span>                                  <span class="c1">; 不自动备份</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">setq</span> <span class="nv">auto-save-default</span> <span class="no">nil</span><span class="p">)</span>                                  <span class="c1">; 不使用Emacs自带的自动保存</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-34" class="outline-3">
<h3 id="headline-34">
解除一些不常用的快捷键
</h3>
<div id="outline-text-headline-34" class="outline-text-3">
<p>
将一些不常用的快捷键解除，防止误操作。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; 解除不常用的快捷键定义</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;s-q&#34;</span><span class="p">)</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;M-z&#34;</span><span class="p">)</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;M-m&#34;</span><span class="p">)</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-x C-z&#34;</span><span class="p">)</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">[</span><span class="nv">mouse-2</span><span class="p">]</span> <span class="no">nil</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-35" class="outline-3">
<h3 id="headline-35">
delsel选择文本输入时直接替换
</h3>
<div id="outline-text-headline-35" class="outline-text-3">
<p>
Emacs默认选择文本后直接输入，是不会直接删除所选择的文本进行替换的。通过内置的 <code class="verbatim">delsel</code> 插件来实现这个行为。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; Directly modify when selecting text</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">delsel</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">delete-selection-mode</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-36" class="outline-3">
<h3 id="headline-36">
自动重载设置
</h3>
<div id="outline-text-headline-36" class="outline-text-3">
<p>
当我们的文件发生了改变后，我们希望Emacs里打开的永远是最新的文件，这个时候，我们需要对自动重载进行设置，让我们的Emacs在文件发生改变的时候自动重载文件。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">autorevert</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">global-auto-revert-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; :bind (&#34;s-u&#34; . revert-buffer)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">auto-revert-interval</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">auto-revert-avoid-polling</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">auto-revert-verbose</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">auto-revert-remote-files</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">auto-revert-check-vc-info</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">global-auto-revert-non-file-buffers</span> <span class="no">t</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-37" class="outline-3">
<h3 id="headline-37">
avy光标移动
</h3>
<div id="outline-text-headline-37" class="outline-text-3">
<p>
<a href="https://github.com/abo-abo/avy">avy</a> 是一个光标移动插件，能快速将光标移动到屏幕上的任意字符，非常强大！</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">avy</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">	<span class="p">((</span><span class="s">&#34;M-j&#34;</span> <span class="o">.</span> <span class="nv">avy-goto-char-timer</span><span class="p">)))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-38" class="outline-3">
<h3 id="headline-38">
amx 记录命令历史
</h3>
<div id="outline-text-headline-38" class="outline-text-3">
<p>
<a href="https://github.com/DarwinAwardWinner/amx">amx - GitHub 主页</a></p>
<p>
这个插件可以记录我们每次调用 M-x 时输入的命令历史，然后每次将最常用的显示在前面，这对于我们短时间希望频繁输入某几个命令的场景非常有用。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">amx</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span> <span class="p">(</span><span class="nv">amx-mode</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-39" class="outline-3">
<h3 id="headline-39">
window-numbering 快捷键切换窗口
</h3>
<div id="outline-text-headline-39" class="outline-text-3">
<p>
分屏之后的emacs在屏幕切换的时候会比较麻烦，针对这个功能有一个可以实现这个的插件，也就是window-numbering。</p>
<p>
使用方法：&lt;M-number&gt;</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">window-numbering</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; :defer 3</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span> <span class="p">(</span><span class="nv">window-numbering-mode</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-40" class="outline-3">
<h3 id="headline-40">
mwim 优化光标移动到行首/行尾
</h3>
<div id="outline-text-headline-40" class="outline-text-3">
<p>
<a href="https://github.com/alezost/mwim.el">mwim - GitHub 主页</a></p>
<p>
C-a 对应了 move-beginning-of-line，M-m 对应了 back-to-indentation。当代码有缩进时，前者会把光标移动到行首（到空格之前），后者会移动到代码文字的开头（到空格之后）。那么实际中这两个按法差别较大，且不易区分，使用起来不方便。mwim 就将二者合并，覆盖 C-a 为 mwim-beginning-of-code-or-line，这样按一次 C-a 时移动到代码文字开头，再按一次则是移动到整行的行首，如此反复。</p>
<p>
同时，更有意义的是，它还可以覆盖 C-e move-end-of-line 为 mwim-end-of-code-or-line，当本行代码结尾有注释时，第一次按 C-e 将光标移动到代码尾部、注释之前。再按一次则是移动到整行的行尾。 这就大大提高了写代码的效率。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">mwim</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="s">&#34;C-a&#34;</span> <span class="o">.</span> <span class="nv">mwim-beginning-of-code-or-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="s">&#34;C-e&#34;</span> <span class="o">.</span> <span class="nv">mwim-end-of-code-or-line</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-41" class="outline-3">
<h3 id="headline-41">
dashboard 配置欢迎页面
</h3>
<div id="outline-text-headline-41" class="outline-text-3">
<p>
<a href="https://github.com/emacs-dashboard/emacs-dashboard">dashboard - GitHub 主页</a></p>
<p>
起初每当我们打开 Emacs 都有一个欢迎界面，显示了一些 Emacs 的帮助信息。这对刚入门而言比较方便，但当我们熟练后这个页面就逐渐无用了。dashboard 就是一个新的欢迎界面，可以列出最近打开的项目、最近打开的文件等等。按下 p 或 r 就可以快速 跳转到相应小结里。还可以列出来标记过的书签、org-mode （Emacs 自带的一个强大的笔记系统）日程、自定义控件等。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">dashboard</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; (setq dashboard-banner-logo-title &#34;Welcome to Emacs!&#34;) ;; 个性签名，随读者喜好设置</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; (setq dashboard-projects-backend &#39;projectile) ;; 读者可以暂时注释掉这一行，等安装了 projectile 后再使用</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">dashboard-startup-banner</span> <span class="ss">&#39;official</span><span class="p">)</span> <span class="c1">;; 也可以自定义图片</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">dashboard-items</span> <span class="o">&#39;</span><span class="p">((</span><span class="nv">recents</span>  <span class="o">.</span> <span class="mi">10</span><span class="p">)</span>   <span class="c1">;; 显示多少个最近文件</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="nv">bookmarks</span> <span class="o">.</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1">;; 显示多少个最近书签</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="nv">projects</span> <span class="o">.</span> <span class="mi">10</span><span class="p">)))</span> <span class="c1">;; 显示多少个最近项目</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">dashboard-setup-startup-hook</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<div id="outline-container-headline-42" class="outline-4">
<h4 id="headline-42">
projectile
</h4>
<div id="outline-text-headline-42" class="outline-text-4">
<p>
配合dashboard使用</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">projectile</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-43" class="outline-3">
<h3 id="headline-43">
marginalia 为 Emacs minibuffer 中的选项添加注解
</h3>
<div id="outline-text-headline-43" class="outline-text-3">
<p>
<a href="https://github.com/minad/marginalia">marginalia - GitHub 主页</a></p>
<p>
一个为 Emacs minibuffer 中的选项添加注解的插件。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">marginalia</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span> <span class="p">(</span><span class="nv">marginalia-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">minibuffer-local-map</span>
</span></span><span class="line"><span class="cl">				<span class="p">(</span><span class="s">&#34;M-A&#34;</span> <span class="o">.</span> <span class="nv">marginalia-cycle</span><span class="p">)))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-44" class="outline-3">
<h3 id="headline-44">
which-key 根据快捷键前缀提示快捷键
</h3>
<div id="outline-text-headline-44" class="outline-text-3">
<p>
<a href="https://github.com/justbur/emacs-which-key">which-key - GitHub 主页</a></p>
<p>
当按下部分快捷键前缀时，它会通过 minibuffer 提示你都有哪些可以按的快捷键及其命令名。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">which-key</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span> <span class="p">(</span><span class="nv">which-key-mode</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-45" class="outline-3">
<h3 id="headline-45">
hydra 把一组特定场景的命令组织到一起， 通过简单按键来进行调用
</h3>
<div id="outline-text-headline-45" class="outline-text-3">
<p>
<a href="https://github.com/abo-abo/hydra">hydra - GitHub 主页</a></p>
<p>
hydra 主要功能是把一组特定场景的命令组织到一起， 通过简单按键来进行调用。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">hydra</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<div id="outline-container-headline-46" class="outline-4">
<h4 id="headline-46">
use-package-hydra
</h4>
<div id="outline-text-headline-46" class="outline-text-4">
<p>
配合hydra使用</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">use-package-hydra</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:after</span> <span class="nv">hydra</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-47" class="outline-3">
<h3 id="headline-47">
multiple-cursors多光标编辑
</h3>
<div id="outline-text-headline-47" class="outline-text-3">
<p><a href="https://hub.nuaa.cf/magnars/multiple-cursors.el">multiple-cursors</a> 插件能让Emacs实现多光标编辑和移动。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">multiple-cursors</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:after</span> <span class="nv">hydra</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">	<span class="p">((</span><span class="s">&#34;C-x M-h m&#34;</span> <span class="o">.</span> <span class="nv">hydra-multiple-cursors/body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	 <span class="p">(</span><span class="s">&#34;C-M-&lt;mouse-1&gt;&#34;</span> <span class="o">.</span> <span class="nv">mc/toggle-cursor-on-click</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hydra</span> <span class="p">(</span><span class="nv">hydra-multiple-cursors</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nb">:hint</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">  Up^^             Down^^           Miscellaneous           % 2(mc/num-cursors) cursor%s(if (&gt; (mc/num-cursors) 1) \&#34;s\&#34; \&#34;\&#34;)
</span></span></span><span class="line"><span class="cl"><span class="s">  ------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="s">   [_p_]   Prev     [_n_]   Next     [_l_] Edit lines  [_0_] Insert numbers
</span></span></span><span class="line"><span class="cl"><span class="s">   [_P_]   Skip     [_N_]   Skip     [_a_] Mark all    [_A_] Insert letters
</span></span></span><span class="line"><span class="cl"><span class="s">   [_M-p_] Unmark   [_M-n_] Unmark   [_s_] Search      [_q_] Quit
</span></span></span><span class="line"><span class="cl"><span class="s">   [_|_] Align with input CHAR       [Click] Cursor at point&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;l&#34;</span> <span class="nv">mc/edit-lines</span> <span class="nb">:exit</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;a&#34;</span> <span class="nv">mc/mark-all-like-this</span> <span class="nb">:exit</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;n&#34;</span> <span class="nv">mc/mark-next-like-this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;N&#34;</span> <span class="nv">mc/skip-to-next-like-this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;M-n&#34;</span> <span class="nv">mc/unmark-next-like-this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;p&#34;</span> <span class="nv">mc/mark-previous-like-this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;P&#34;</span> <span class="nv">mc/skip-to-previous-like-this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;M-p&#34;</span> <span class="nv">mc/unmark-previous-like-this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;|&#34;</span> <span class="nv">mc/vertical-align</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;s&#34;</span> <span class="nv">mc/mark-all-in-region-regexp</span> <span class="nb">:exit</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;0&#34;</span> <span class="nv">mc/insert-numbers</span> <span class="nb">:exit</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;A&#34;</span> <span class="nv">mc/insert-letters</span> <span class="nb">:exit</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;&lt;mouse-1&gt;&#34;</span> <span class="nv">mc/add-cursor-on-click</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; Help with click recognition in this hydra</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;&lt;down-mouse-1&gt;&#34;</span> <span class="nv">ignore</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;&lt;drag-mouse-1&gt;&#34;</span> <span class="nv">ignore</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;q&#34;</span> <span class="no">nil</span><span class="p">)))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-48" class="outline-3">
<h3 id="headline-48">
highlight-symbol 高亮出当前 Buffer 中所有的、与光标所在处的符号相同的符号
</h3>
<div id="outline-text-headline-48" class="outline-text-3">
<p>
<a href="https://github.com/nschum/highlight-symbol.el">highlight-symbol - GitHub 主页</a></p>
<p>
这个插件可以高亮出当前 Buffer 中所有的、与光标所在处的符号相同的符号。也就是例如一些同名变量、函数名等。虽然在后面我们使用一些其他插件时也会捎带有类似功能，但它可以同时高亮很多字符，便于阅读代码等。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">highlight-symbol</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span> <span class="p">(</span><span class="nv">highlight-symbol-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;&lt;f10&gt;&#34;</span> <span class="o">.</span> <span class="nv">highlight-symbol</span><span class="p">)</span>	<span class="c1">; 按下 F10 键就可高亮当前符号</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;&lt;f9&gt;&#34;</span> <span class="o">.</span> <span class="nv">highlight-symbol-remove-all</span><span class="p">)</span> <span class="c1">; 取消 Emacs 中所有当前高亮的符号</span>
</span></span><span class="line"><span class="cl">		   <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-49" class="outline-3">
<h3 id="headline-49">
rainbow-delimiters 用不同颜色标记多级括号，方便看清代码块
</h3>
<div id="outline-text-headline-49" class="outline-text-3">
<p>
<a href="https://github.com/Fanael/rainbow-delimiters">rainbow-delimiters - GitHub 主页</a></p>
<p>
这个插件可以用不同颜色标记多级括号，方便看清代码块（尤其在 EmacsLisp 中）。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">rainbow-delimiters</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">prog-mode</span> <span class="o">.</span> <span class="nv">rainbow-delimiters-mode</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-50" class="outline-3">
<h3 id="headline-50">
evil（为 Vim 用户）
</h3>
<div id="outline-text-headline-50" class="outline-text-3">
<p>
<a href="https://github.com/emacs-evil/evil">evil - GitHub 主页</a></p>
<p>
evil 可以让习惯了 Vim 的用户在 Emacs 中使用 Vim 按键方式，大大减轻了 Vim 用户转入 Emacs 的成本。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">evil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; :init (evil-mode)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span>
</span></span><span class="line"><span class="cl">	<span class="p">((</span><span class="s">&#34;C-x C-z&#34;</span> <span class="o">.</span> <span class="nv">evil-mode</span><span class="p">)))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-51" class="outline-3">
<h3 id="headline-51">
WorkLogReport 工作日志报告
</h3>
<div id="outline-text-headline-51" class="outline-text-3">
<p>
插入工作日志报告模板</p>
<p>
为什么%s会被替换为时间戳而不是其他内容被替换为时间戳，原理是什么
这是因为在 Emacs Lisp 中，`format` 函数的工作方式类似于 C 语言中的 `printf` 函数。`format` 函数接受一个格式字符串和一系列参数，然后根据格式字符串中的格式指定符（如 `%s`、`%d` 等）将后续的参数插入到格式字符串中。</p>
<p>
在你的代码中，`format` 函数的格式字符串是：</p>
<p>
```lisp
&#34;<strong>*</strong> %s
,#+BEGIN_SRC emacs-lisp :tangle %s.txt
%s: name\n1、
,#+END_SRC&#34;
```</p>
<p>
这个字符串中有三个 `%s`，所以 `format` 函数需要三个额外的参数。在你的代码中，这三个参数都是 `block-name`，即你处理过的时间戳。</p>
<p>
所以，当 `format` 函数运行时，它会依次取出 `block-name`，并将其插入到格式字符串中的 `%s` 的位置。这就是为什么 `%s` 会被替换为时间戳的原理。</p>
<p>
如果你希望将不同的内容插入到格式字符串中，你只需提供不同的参数即可。例如：</p>
<p>
```lisp
(format &#34;Hello, %s! Today is %s.&#34; &#34;Alice&#34; &#34;Monday&#34;)
```</p>
<p>
这段代码会返回字符串 &#34;Hello, Alice! Today is Monday.&#34;。
,******************************************************************************
这句有什么用：(block-name (concat clean-time))  ; 构建代码块名
这一句 `(block-name (concat clean-time))` 的作用是创建一个新的变量 `block-name`，并将其设置为 `clean-time` 的值。</p>
<p>
在这个上下文中，`clean-time` 是一个已经去除了破折号和冒号的时间字符串。`concat` 函数通常用于连接多个字符串，但在这里，它只有一个参数 `clean-time`，所以它实际上只是返回 `clean-time` 的值。</p>
<p>
因此，这一句的效果就是创建了一个新的变量 `block-name`，并将其设置为与 `clean-time` 相同的值。后面的代码中使用 `block-name` 作为代码块的名字。</p>
<p>
如果你的代码中没有需要使用不同的名称来表示清理过的时间戳，那么这一行代码实际上是不必要的，你可以直接使用 `clean-time`。但是，如果你打算在后续的代码中修改 `block-name` 或 `clean-time` 的值，那么这一行代码就很有用了，因为它确保了 `block-name` 和 `clean-time` 是两个独立的变量，修改一个不会影响另一个。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">add-code-block</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;在当前位置添加一个代码块，并以时间作为块名进行命名&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">time</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%Y-%m-%d&#34;</span><span class="p">))</span>  <span class="c1">; 获取当前时间</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="nv">clean-time</span> <span class="p">(</span><span class="nv">replace-regexp-in-string</span> <span class="s">&#34;[-:]&#34;</span> <span class="s">&#34;&#34;</span> <span class="nv">time</span><span class="p">))</span>  <span class="c1">; 去除时间中的破折号和冒号</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="nv">block-name</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">clean-time</span><span class="p">))</span>  <span class="c1">; 构建代码块名</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="nv">code-block</span> <span class="p">(</span><span class="nf">format</span>
</span></span><span class="line"><span class="cl">						<span class="s">&#34;*** %s\n
</span></span></span><span class="line"><span class="cl"><span class="s">  ,#+BEGIN_SRC emacs-lisp :tangle %s.txt
</span></span></span><span class="line"><span class="cl"><span class="s">  %s: name\n1、
</span></span></span><span class="line"><span class="cl"><span class="s">  ,#+END_SRC\n\n&#34;</span>
</span></span><span class="line"><span class="cl">						<span class="nv">block-name</span> <span class="nv">clean-time</span> <span class="nv">block-name</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nf">insert</span> <span class="nv">code-block</span><span class="p">)))</span>  <span class="c1">; 在当前位置插入代码块</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; 设置快捷键 C-c b 绑定到 add-code-block 函数</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-c SPC r&#34;</span><span class="p">)</span> <span class="ss">&#39;add-code-block</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-52" class="outline-3">
<h3 id="headline-52">
g-org-insert-note-header 插入一些 Org 模式的头部信息
</h3>
<div id="outline-text-headline-52" class="outline-text-3">
<p>
用于在当前光标位置插入一些 Org 模式的头部信息。这些头部信息包括了一些选项，标题，作者以及一些其他设置</p>
<ul>
<li>
</li>
<li>
</li>
<li>
</li>
<li>
</li>
<li>
</li>
</ul>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">g-org-insert-note-header</span> <span class="p">()</span> <span class="c1">;;; 定义一个名为g-org-insert-note-header ()的函数</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">interactive</span><span class="p">)</span> <span class="c1">;;; 函数的一个特殊声明，表示函数可以被用户调用</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nf">insert</span>
</span></span><span class="line"><span class="cl">	 <span class="s">&#34;#+TITLE: \n#+AUTHOR: yenao\n#+OPTIONS: toc:t num:10 H:10 ^:nil \\n:t broken-links:nil pri:t\n#+STARTUP: overview\n#+HTML_HEAD: \&lt;link rel=\&#34;stylesheet\&#34; type=\&#34;text\/css\&#34; href=\&#34;http:\/\/gongzhitaao.org\/orgcss\/org.css\&#34;\/\&gt;\n&#34;</span>
</span></span><span class="line"><span class="cl">	 <span class="p">))</span> <span class="c1">;;; insert函数用于在当前 光标位置插入指定的文本内容，当你调用这个函数时，它会在当前光标位置插入文本#+OPTIONS: ^:nil、#+TITLE:  和#+AUTHOR: yenao</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; #+LANGUAGE: zh-CN ;; zh-CN或者en</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-53" class="outline-3">
<h3 id="headline-53">
g-org-emacs-lisp-code-block 插入emacs-lisp代码块
</h3>
<div id="outline-text-headline-53" class="outline-text-3">
<p>
用于插入emacs-lisp代码块</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">g-org-emacs-lisp-code-block</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nf">insert</span> <span class="s">&#34;#+begin_src emacs-lisp\n\n#+end_src&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-54" class="outline-3">
<h3 id="headline-54">
g-org-c-code-block 插入C语言代码块
</h3>
<div id="outline-text-headline-54" class="outline-text-3">
<p>
用于插入c语言的代码块</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">g-org-c-code-block</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nf">insert</span> <span class="s">&#34;#+begin_src c\n\n#+end_src&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-55" class="outline-3">
<h3 id="headline-55">
g-org-bash-code-block 插入bash语言的代码块
</h3>
<div id="outline-text-headline-55" class="outline-text-3">
<p>
用于插入bash语言的代码块</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">g-org-bash-code-block</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nf">insert</span> <span class="s">&#34;#+begin_src bash\n\n#+end_src&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-56" class="outline-3">
<h3 id="headline-56">
g-org-html-code-block 插入html语言的代码块
</h3>
<div id="outline-text-headline-56" class="outline-text-3">
<p>
用于插入html语言的代码块</p>
<div class="src src-bash">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">  <span class="o">(</span>defun g-org-html-code-block <span class="o">()</span>
</span></span><span class="line"><span class="cl">   <span class="o">(</span>interactive<span class="o">)</span>
</span></span><span class="line"><span class="cl">   <span class="o">(</span>insert <span class="s2">&#34;#+begin_src html\n\n#+end_src&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-57" class="outline-3">
<h3 id="headline-57">
markdown
</h3>
<div id="outline-text-headline-57" class="outline-text-3">
<p>
使emacs支持markdown模式编辑文件</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">markdown-mode</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:defer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;;markdown设置</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;markdown-mode</span> <span class="s">&#34;markdown-mode&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;Major mode for editing Markdown files&#34;</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.markdown\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">markdown-mode</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\.md\\&#39;&#34;</span> <span class="o">.</span> <span class="nv">markdown-mode</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-58" class="outline-3">
<h3 id="headline-58">
init-edit.el 文件尾
</h3>
<div id="outline-text-headline-58" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; (message &#34;init-base configuration: %.2fs&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;          (float-time (time-subtract (current-time) my/init-base-start-time)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-edit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-edit.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-59" class="outline-2">
<h2 id="headline-59">
init-org.el
</h2>
<div id="outline-text-headline-59" class="outline-text-2">
<div id="outline-container-headline-60" class="outline-3">
<h3 id="headline-60">
init-org.el 文件头
</h3>
<div id="outline-text-headline-60" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-org.el --- Org mode settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-61" class="outline-3">
<h3 id="headline-61">
org-appear自动展开强调链接
</h3>
<div id="outline-text-headline-61" class="outline-text-3">
<p>
通过 <a href="https://hub.nuaa.cf/awth13/org-appear">org-appear</a> 插件，当我们的光标移动到Org mode里的强调、链接上时，会自动展开，这样方便进行编辑。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-appear</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">org-appear-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-appear-autolinks</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-appear-autosubmarkers</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-appear-autoentities</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-appear-autokeywords</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-appear-inside-latex</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-62" class="outline-3">
<h3 id="headline-62">
org-auto-tangle自动tangle设置
</h3>
<div id="outline-text-headline-62" class="outline-text-3">
<p>
<a href="https://hub.nuaa.cf/yilkalargaw/org-auto-tangle">org-auto-tangle</a> 插件可以在Org mode下自动进行tangle。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-auto-tangle</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">org-auto-tangle-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-auto-tangle-default</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-63" class="outline-3">
<h3 id="headline-63">
org-capture快速记录设置
</h3>
<div id="outline-text-headline-63" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-capture</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(</span><span class="s">&#34;C-c c&#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span> <span class="p">(</span><span class="nv">org-capture</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">((</span><span class="nv">org-capture-mode</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">								 <span class="p">(</span><span class="nb">setq-local</span> <span class="nv">org-complete-tags-always-offer-all-agenda-tags</span> <span class="no">t</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="nv">org-capture-mode</span> <span class="o">.</span> <span class="nv">delete-other-windows</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-capture-use-agenda-date</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; define common template</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-capture-templates</span> <span class="o">`</span><span class="p">((</span><span class="s">&#34;t&#34;</span> <span class="s">&#34;Tasks&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+headline</span> <span class="s">&#34;tasks.org&#34;</span> <span class="s">&#34;Reminders&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							  <span class="s">&#34;* TODO %i%?&#34;</span>
</span></span><span class="line"><span class="cl">							  <span class="nb">:empty-lines-after</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">							  <span class="nb">:prepend</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;n&#34;</span> <span class="s">&#34;Notes&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+headline</span> <span class="s">&#34;capture.org&#34;</span> <span class="s">&#34;Notes&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							  <span class="s">&#34;* %? %^g\n%i\n&#34;</span>
</span></span><span class="line"><span class="cl">							  <span class="nb">:empty-lines-after</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="c1">;; For EWW</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;b&#34;</span> <span class="s">&#34;Bookmarks&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+headline</span> <span class="s">&#34;capture.org&#34;</span> <span class="s">&#34;Bookmarks&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							  <span class="s">&#34;* %:description\n\n%a%?&#34;</span>
</span></span><span class="line"><span class="cl">							  <span class="nb">:empty-lines</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">							  <span class="nb">:immediate-finish</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;d&#34;</span> <span class="s">&#34;Diary&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;dt&#34;</span> <span class="s">&#34;Today&#39;s TODO list&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+olp+datetree</span> <span class="s">&#34;diary.org&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							  <span class="s">&#34;* Today&#39;s TODO list [/]\n%T\n\n** TODO %?&#34;</span>
</span></span><span class="line"><span class="cl">							  <span class="nb">:empty-lines</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">							  <span class="nb">:jump-to-captured</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;do&#34;</span> <span class="s">&#34;Other stuff&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+olp+datetree</span> <span class="s">&#34;diary.org&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							  <span class="s">&#34;* %?\n%T\n\n%i&#34;</span>
</span></span><span class="line"><span class="cl">							  <span class="nb">:empty-lines</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">							  <span class="nb">:jump-to-captured</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-64" class="outline-3">
<h3 id="headline-64">
denote笔记设置
</h3>
<div id="outline-text-headline-64" class="outline-text-3">
<p>
<a href="https://protesilaos.com/emacs/denote">denote</a> 是一个轻量级的笔记插件，拥有良好的文件名命名模板。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">denote</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">dired-mode</span> <span class="o">.</span> <span class="nv">denote-dired-mode-in-directories</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-c d n&#34;</span> <span class="o">.</span> <span class="nv">denote</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c d d&#34;</span> <span class="o">.</span> <span class="nv">denote-date</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c d t&#34;</span> <span class="o">.</span> <span class="nv">denote-type</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c d s&#34;</span> <span class="o">.</span> <span class="nv">denote-subdirectory</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c d f&#34;</span> <span class="o">.</span> <span class="nv">denote-open-or-create</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c d r&#34;</span> <span class="o">.</span> <span class="nv">denote-dired-rename-file</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">with-eval-after-load</span> <span class="ss">&#39;org-capture</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-org-capture-specifiers</span> <span class="s">&#34;%l\n%i\n%?&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-capture-templates</span>
</span></span><span class="line"><span class="cl">				   <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;N&#34;</span> <span class="s">&#34;New note (with denote.el)&#34;</span> <span class="nv">plain</span>
</span></span><span class="line"><span class="cl">					 <span class="p">(</span><span class="nv">file</span> <span class="nv">denote-last-path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					 <span class="nf">#&#39;</span><span class="nv">denote-org-capture</span>
</span></span><span class="line"><span class="cl">					 <span class="nb">:no-save</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">					 <span class="nb">:immediate-finish</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">					 <span class="nb">:kill-buffer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">					 <span class="nb">:jump-to-captured</span> <span class="no">t</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-directory</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;~/org/denote/&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-known-keywords</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;emacs&#34;</span> <span class="s">&#34;entertainment&#34;</span> <span class="s">&#34;reading&#34;</span> <span class="s">&#34;studying&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-infer-keywords</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-sort-keywords</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; org is default, set others such as text, markdown-yaml, markdown-toml</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-file-type</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-prompts</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">title</span> <span class="nv">keywords</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; We allow multi-word keywords by default.  The author&#39;s personal</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; preference is for single-word keywords for a more rigid workflow.</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-allow-multi-word-keywords</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-date-format</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; If you use Markdown or plain text files (Org renders links as buttons</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; right away)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;find-file-hook</span> <span class="nf">#&#39;</span><span class="nv">denote-link-buttonize-buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">denote-dired-rename-expert</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; OR if only want it in `denote-dired-directories&#39;:</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;dired-mode-hook</span> <span class="nf">#&#39;</span><span class="nv">denote-dired-mode-in-directories</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-65" class="outline-3">
<h3 id="headline-65">
consult-notes查找笔记
</h3>
<div id="outline-text-headline-65" class="outline-text-3">
<p>
<a href="https://hub.nuaa.cf/mclear-tools/consult-notes">consult-notes</a> 插件可以通过consult快速找到笔记。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">consult-notes</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:commands</span> <span class="p">(</span><span class="nv">consult-notes</span>
</span></span><span class="line"><span class="cl">			   <span class="nv">consult-notes-search-in-all-notes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-c n f&#34;</span> <span class="o">.</span> <span class="nv">consult-notes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c n c&#34;</span> <span class="o">.</span> <span class="nv">consult-notes-search-in-all-notes</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">consult-notes-file-dir-sources</span>
</span></span><span class="line"><span class="cl">		  <span class="o">`</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;work&#34;</span>    <span class="sc">?w</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&#34;/midea/&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;article&#34;</span> <span class="sc">?a</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&#34;/article/&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;org&#34;</span>     <span class="sc">?o</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&#34;/&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;hugo&#34;</span>    <span class="sc">?h</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="nv">org-directory</span> <span class="s">&#34;/hugo/&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;books&#34;</span>   <span class="sc">?b</span> <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">getenv</span> <span class="s">&#34;HOME&#34;</span><span class="p">)</span> <span class="s">&#34;/Books/&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; embark support</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">with-eval-after-load</span> <span class="ss">&#39;embark</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">defun</span> <span class="nv">consult-notes-open-dired</span> <span class="p">(</span><span class="nv">cand</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;Open notes directory dired with point on file CAND.&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;fNote: &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="c1">;; dired-jump is in dired-x.el but is moved to dired in Emacs 28</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nv">dired-jump</span> <span class="no">nil</span> <span class="nv">cand</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">defun</span> <span class="nv">consult-notes-marked</span> <span class="p">(</span><span class="nv">cand</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;Open a notes file CAND in Marked 2.
</span></span></span><span class="line"><span class="cl"><span class="s">  Marked 2 is a mac app that renders markdown.&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;fNote: &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;open -a \&#34;Marked 2\&#34; \&#34;%s\&#34;&#34;</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="nv">cand</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">defun</span> <span class="nv">consult-notes-grep</span> <span class="p">(</span><span class="nv">cand</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;Run grep in directory of notes file CAND.&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;fNote: &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nv">consult-grep</span> <span class="p">(</span><span class="nf">file-name-directory</span> <span class="nv">cand</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">embark-define-keymap</span> <span class="nv">consult-notes-map</span>
</span></span><span class="line"><span class="cl">							<span class="s">&#34;Keymap for Embark notes actions.&#34;</span>
</span></span><span class="line"><span class="cl">							<span class="nb">:parent</span> <span class="nv">embark-file-map</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="s">&#34;d&#34;</span> <span class="nv">consult-notes-dired</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="s">&#34;g&#34;</span> <span class="nv">consult-notes-grep</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="s">&#34;m&#34;</span> <span class="nv">consult-notes-marked</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;embark-keymap-alist</span> <span class="o">`</span><span class="p">(</span><span class="o">,</span><span class="nv">consult-notes-category</span> <span class="o">.</span> <span class="nv">consult-notes-map</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	  <span class="c1">;; make embark-export use dired for notes</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">setf</span> <span class="p">(</span><span class="nv">alist-get</span> <span class="nv">consult-notes-category</span> <span class="nv">embark-exporters-alist</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">embark-export-dired</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-66" class="outline-3">
<h3 id="headline-66">
org-super-links反链设置
</h3>
<div id="outline-text-headline-66" class="outline-text-3">
<p>
<a href="https://github.com/toshism/org-super-links">org-super-links</a> 插件可以设置反向链接。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">quelpa</span>
</span></span><span class="line"><span class="cl">   <span class="o">&#39;</span><span class="p">(</span><span class="nv">org-super-liks</span>
</span></span><span class="line"><span class="cl">	 <span class="nb">:fetcher</span> <span class="nv">git</span>
</span></span><span class="line"><span class="cl">	 <span class="nb">:url</span> <span class="s">&#34;https://hub.nuaa.cf/toshism/org-super-links&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">org-super-links</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-c s s&#34;</span>   <span class="o">.</span> <span class="nv">org-super-links-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c s l&#34;</span>   <span class="o">.</span> <span class="nv">org-super-links-store-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c s C-l&#34;</span> <span class="o">.</span> <span class="nv">org-super-links-insert-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c s d&#34;</span>   <span class="o">.</span> <span class="nv">org-super-links-quick-insert-drawer-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c s i&#34;</span>   <span class="o">.</span> <span class="nv">org-super-links-quick-insert-inline-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c s C-d&#34;</span> <span class="o">.</span> <span class="nv">org-super-links-delete-link</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-super-links-related-into-drawer</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span>	<span class="nv">org-super-links-link-prefix</span> <span class="ss">&#39;org-super-links-link-prefix-timestamp</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-67" class="outline-3">
<h3 id="headline-67">
ox文件导出通用设置
</h3>
<div id="outline-text-headline-67" class="outline-text-3">
<p>
下面是org文件导出的通用设置。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-with-toc</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-with-tags</span> <span class="ss">&#39;not-in-toc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-with-drawers</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-with-priority</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-with-footnotes</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-with-smart-quotes</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-with-section-numbers</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-with-sub-superscripts</span> <span class="ss">&#39;{}</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; `org-export-use-babel&#39; set to nil will cause all source block header arguments to be ignored This means that code blocks with the argument :exports none or :exports results will end up in the export.</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; See:</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; https://stackoverflow.com/questions/29952543/how-do-i-prevent-org-mode-from-executing-all-of-the-babel-source-blocks</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-use-babel</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-headline-levels</span> <span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-coding-system</span> <span class="ss">&#39;utf-8</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-with-broken-links</span> <span class="ss">&#39;mark</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-export-default-language</span> <span class="s">&#34;zh-CN&#34;</span><span class="p">)</span> <span class="c1">; 默认是en</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; (org-ascii-text-width 72)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-68" class="outline-3">
<h3 id="headline-68">
org导出后端设置
</h3>
<div id="outline-text-headline-68" class="outline-text-3">
<div id="outline-container-headline-69" class="outline-4">
<h4 id="headline-69">
ox-html导出HTML设置
</h4>
<div id="outline-text-headline-69" class="outline-text-4">
<p>
我们先来对HTML导出做一个基本设置：</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-html</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; add support for video</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">org-video-link-export</span> <span class="p">(</span><span class="nv">path</span> <span class="nv">desc</span> <span class="nv">backend</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">ext</span> <span class="p">(</span><span class="nv">file-name-extension</span> <span class="nv">path</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">cond</span>
</span></span><span class="line"><span class="cl">		 <span class="p">((</span><span class="nf">eq</span> <span class="ss">&#39;html</span> <span class="nv">backend</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;&lt;video width=&#39;800&#39; preload=&#39;metadata&#39; controls=&#39;controls&#39;&gt;&lt;source type=&#39;video/%s&#39; src=&#39;%s&#39; /&gt;&lt;/video&gt;&#34;</span> <span class="nv">ext</span> <span class="nv">path</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		 <span class="c1">;; fall-through case for everything else</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="no">t</span>
</span></span><span class="line"><span class="cl">		  <span class="nv">path</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-link-set-parameters</span> <span class="s">&#34;video&#34;</span> <span class="nb">:export</span> <span class="ss">&#39;org-video-link-export</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-html-doctype</span> <span class="s">&#34;html5&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-html-html5-fancy</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-html-checkbox-type</span> <span class="ss">&#39;unicode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-html-validation-link</span> <span class="no">nil</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">htmlize</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">htmlize-pre-style</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">htmlize-output-type</span> <span class="ss">&#39;inline-css</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-70" class="outline-4">
<h4 id="headline-70">
ox-latex导出PDF设置
</h4>
<div id="outline-text-headline-70" class="outline-text-4">
<p>
<code class="verbatim">ox-latex</code> 是Org mode自带的功能，可以将Org文件导出为latex文件和PDF文件。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-latex</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:defer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-classes</span>
</span></span><span class="line"><span class="cl">				 <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;cn-article&#34;</span>
</span></span><span class="line"><span class="cl">				   <span class="s">&#34;\\documentclass[UTF8,a4paper]{article}&#34;</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="s">&#34;\\section{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\section*{%s}&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="s">&#34;\\subsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsection*{%s}&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="s">&#34;\\subsubsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsubsection*{%s}&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="s">&#34;\\paragraph{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\paragraph*{%s}&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="s">&#34;\\subparagraph{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subparagraph*{%s}&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-classes</span>
</span></span><span class="line"><span class="cl">				 <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;cn-report&#34;</span>
</span></span><span class="line"><span class="cl">				   <span class="s">&#34;\\documentclass[11pt,a4paper]{report}&#34;</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="s">&#34;\\chapter{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\chapter*{%s}&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="s">&#34;\\section{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\section*{%s}&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="s">&#34;\\subsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsection*{%s}&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="s">&#34;\\subsubsection{%s}&#34;</span> <span class="o">.</span> <span class="s">&#34;\\subsubsection*{%s}&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-latex-default-class</span> <span class="s">&#34;cn-article&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-latex-image-default-height</span> <span class="s">&#34;0.9\\textheight&#34;</span>
</span></span><span class="line"><span class="cl">		  <span class="nv">org-latex-image-default-width</span> <span class="s">&#34;\\linewidth&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-latex-pdf-process</span>
</span></span><span class="line"><span class="cl">		  <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;xelatex -interaction nonstopmode -output-directory %o %f&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;bibtex %b&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;xelatex -interaction nonstopmode -output-directory %o %f&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;xelatex -interaction nonstopmode -output-directory %o %f&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;rm -fr %b.out %b.log %b.tex %b.brf %b.bbl auto&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; 使用 Listings 宏包格式化源代码(只是把代码框用 listing 环境框起来，还需要额外的设置)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-latex-listings</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; mapping jupyter-python to Python</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-latex-listings-langs</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">jupyter-python</span> <span class="s">&#34;Python&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; Options for \lset command（reference to listing Manual)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-latex-listings-options</span>
</span></span><span class="line"><span class="cl">		  <span class="o">&#39;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;basicstyle&#34;</span> <span class="s">&#34;\\small\\ttfamily&#34;</span><span class="p">)</span>       <span class="c1">; 源代码字体样式</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;keywordstyle&#34;</span> <span class="s">&#34;\\color{eminence}\\small&#34;</span><span class="p">)</span>                 <span class="c1">; 关键词字体样式</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; (&#34;identifierstyle&#34; &#34;\\color{doc}\\small&#34;)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;commentstyle&#34;</span> <span class="s">&#34;\\color{commentgreen}\\small\\itshape&#34;</span><span class="p">)</span>    <span class="c1">; 批注样式</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;stringstyle&#34;</span> <span class="s">&#34;\\color{red}\\small&#34;</span><span class="p">)</span>                       <span class="c1">; 字符串样式</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;showstringspaces&#34;</span> <span class="s">&#34;false&#34;</span><span class="p">)</span>                                <span class="c1">; 字符串空格显示</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;numbers&#34;</span> <span class="s">&#34;left&#34;</span><span class="p">)</span>                                          <span class="c1">; 行号显示</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;numberstyle&#34;</span> <span class="s">&#34;\\color{preprocess}&#34;</span><span class="p">)</span>                       <span class="c1">; 行号样式</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;stepnumber&#34;</span> <span class="s">&#34;1&#34;</span><span class="p">)</span>                                          <span class="c1">; 行号递增</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;xleftmargin&#34;</span> <span class="s">&#34;2em&#34;</span><span class="p">)</span>                                       <span class="c1">;</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; (&#34;backgroundcolor&#34; &#34;\\color{background}&#34;)                   ; 代码框背景色</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;tabsize&#34;</span> <span class="s">&#34;4&#34;</span><span class="p">)</span>                                             <span class="c1">; TAB 等效空格数</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;captionpos&#34;</span> <span class="s">&#34;t&#34;</span><span class="p">)</span>                                          <span class="c1">; 标题位置 top or buttom(t|b)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;breaklines&#34;</span> <span class="s">&#34;true&#34;</span><span class="p">)</span>                                       <span class="c1">; 自动断行</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;breakatwhitespace&#34;</span> <span class="s">&#34;true&#34;</span><span class="p">)</span>                                <span class="c1">; 只在空格分行</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;showspaces&#34;</span> <span class="s">&#34;false&#34;</span><span class="p">)</span>                                      <span class="c1">; 显示空格</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;columns&#34;</span> <span class="s">&#34;flexible&#34;</span><span class="p">)</span>                                      <span class="c1">; 列样式</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;frame&#34;</span> <span class="s">&#34;tb&#34;</span><span class="p">)</span>                                              <span class="c1">; 代码框：single, or tb 上下线</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;frameleftmargin&#34;</span> <span class="s">&#34;1.5em&#34;</span><span class="p">)</span>                                 <span class="c1">; frame 向右偏移</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; (&#34;frameround&#34; &#34;tttt&#34;)                                       ; 代码框： 圆角</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; (&#34;framesep&#34; &#34;0pt&#34;)</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; (&#34;framerule&#34; &#34;1pt&#34;)                                         ; 框的线宽</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; (&#34;rulecolor&#34; &#34;\\color{background}&#34;)                         ; 框颜色</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; (&#34;fillcolor&#34; &#34;\\color{white}&#34;)</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; (&#34;rulesepcolor&#34; &#34;\\color{comdil}&#34;)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;framexleftmargin&#34;</span> <span class="s">&#34;5mm&#34;</span><span class="p">)</span>                                  <span class="c1">; let line numer inside frame</span>
</span></span><span class="line"><span class="cl">			<span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-71" class="outline-4">
<h4 id="headline-71">
ox-gfm导出Markdown设置
</h4>
<div id="outline-text-headline-71" class="outline-text-4">
<p>
我们通过 <a href="https://github.com/larstvei/ox-gfm">ox-gfm</a> 插件来导出Github样式的Markdown文件。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-gfm</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:after</span> <span class="nv">ox</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-72" class="outline-4">
<h4 id="headline-72">
ox-publish导出静态站点设置
</h4>
<div id="outline-text-headline-72" class="outline-text-4">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="s">&#34;~/org&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">make-directory</span> <span class="s">&#34;~/org&#34;</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-publish</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:commands</span> <span class="p">(</span><span class="nv">org-publish</span> <span class="nv">org-publish-all</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-export-global-macros</span>
</span></span><span class="line"><span class="cl">		  <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;timestamp&#34;</span> <span class="o">.</span> <span class="s">&#34;@@html:&lt;span class=\&#34;timestamp\&#34;&gt;[$1]&lt;/span&gt;@@&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; sitemap 生成函数</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">my/org-sitemap-date-entry-format</span> <span class="p">(</span><span class="nv">entry</span> <span class="nv">style</span> <span class="nv">project</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;Format ENTRY in org-publish PROJECT Sitemap format ENTRY ENTRY STYLE format that includes date.&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">filename</span> <span class="p">(</span><span class="nv">org-publish-find-title</span> <span class="nv">entry</span> <span class="nv">project</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">=</span> <span class="p">(</span><span class="nf">length</span> <span class="nv">filename</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nf">format</span> <span class="s">&#34;*%s*&#34;</span> <span class="nv">entry</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;{{{timestamp(%s)}}} [[file:%s][%s]]&#34;</span>
</span></span><span class="line"><span class="cl">				  <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%Y-%m-%d&#34;</span>
</span></span><span class="line"><span class="cl">									  <span class="p">(</span><span class="nv">org-publish-find-date</span> <span class="nv">entry</span> <span class="nv">project</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">				  <span class="nv">entry</span>
</span></span><span class="line"><span class="cl">				  <span class="nv">filename</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; 设置 org-publish 的项目列表</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-publish-project-alist</span>
</span></span><span class="line"><span class="cl">		  <span class="o">&#39;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">			<span class="c1">;; 笔记部分</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;org-notes&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:base-directory</span> <span class="s">&#34;~/org/&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:base-extension</span> <span class="s">&#34;org&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:exclude</span> <span class="s">&#34;\\(tasks\\|test\\|scratch\\|diary\\|capture\\|mail\\|habits\\|resume\\|meetings\\|personal\\|org-beamer-example\\)\\.org\\|test\\|article\\|roam\\|hugo&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:publishing-directory</span> <span class="s">&#34;~/public_html/&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:recursive</span> <span class="no">t</span>                 <span class="c1">; include subdirectories if t</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:publishing-function</span> <span class="nv">org-html-publish-to-html</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:headline-levels</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:auto-preamble</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:auto-sitemap</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:sitemap-filename</span> <span class="s">&#34;sitemap.org&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:sitemap-title</span> <span class="s">&#34;Sitemap&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:sitemap-format-entry</span> <span class="nv">my/org-sitemap-date-entry-format</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="c1">;; 静态资源部分</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;org-static&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:base-directory</span> <span class="s">&#34;~/org/&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:base-extension</span> <span class="s">&#34;css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf\\|mov&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:publishing-directory</span> <span class="s">&#34;~/public_html/&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:recursive</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:publishing-function</span> <span class="nv">org-publish-attachment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="c1">;; 项目集合</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="s">&#34;org&#34;</span>
</span></span><span class="line"><span class="cl">			 <span class="nb">:components</span> <span class="p">(</span><span class="s">&#34;org-notes&#34;</span> <span class="s">&#34;org-static&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-73" class="outline-4">
<h4 id="headline-73">
ox-hugo导出博客设置
</h4>
<div id="outline-text-headline-73" class="outline-text-4">
<p>
<a href="https://github.com/kaushalmodi/ox-hugo">ox-hugo</a> 插件可以将 org 文件导出为 <a href="https://gohugo.io/">hugo</a> 需要的 Markdown 文件，并快速通过 hugo 进行博客的生成和发布。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-hugo</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>    
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">org-hugo-base-dir</span> <span class="s">&#34;~/ox-hugo/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">with-eval-after-load</span> <span class="ss">&#39;org-capture</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">defun</span> <span class="nv">org-hugo-new-subtree-post-capture-template</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;Returns </span><span class="ss">`org-capture&#39;</span><span class="s"> template string for new Hugo post.
</span></span></span><span class="line"><span class="cl"><span class="s">  See </span><span class="ss">`org-capture-templates&#39;</span><span class="s"> for more information.&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">let*</span> <span class="p">((</span><span class="nv">title</span> <span class="p">(</span><span class="nf">read-from-minibuffer</span> <span class="s">&#34;Post Title: &#34;</span><span class="p">))</span> <span class="c1">; Prompt to enter the post title</span>
</span></span><span class="line"><span class="cl">			   <span class="p">(</span><span class="nv">fname</span> <span class="p">(</span><span class="nv">org-hugo-slug</span> <span class="nv">title</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nf">mapconcat</span> <span class="nf">#&#39;identity</span>
</span></span><span class="line"><span class="cl">					 <span class="o">`</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">					   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;* TODO &#34;</span> <span class="nv">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					   <span class="s">&#34;:PROPERTIES:&#34;</span>
</span></span><span class="line"><span class="cl">					   <span class="o">,</span><span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;:EXPORT_FILE_NAME: &#34;</span> <span class="nv">fname</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					   <span class="s">&#34;:END:&#34;</span>
</span></span><span class="line"><span class="cl">					   <span class="s">&#34;%?\n&#34;</span><span class="p">)</span>          <span class="c1">; Place the cursor here finally</span>
</span></span><span class="line"><span class="cl">					 <span class="s">&#34;\n&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-capture-templates</span>
</span></span><span class="line"><span class="cl">				   <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;h&#34;</span>                <span class="c1">; `org-capture&#39; binding + h</span>
</span></span><span class="line"><span class="cl">					 <span class="s">&#34;Hugo post&#34;</span>
</span></span><span class="line"><span class="cl">					 <span class="nv">entry</span>
</span></span><span class="line"><span class="cl">					 <span class="c1">;; It is assumed that below file is present in `org-directory&#39;</span>
</span></span><span class="line"><span class="cl">					 <span class="c1">;; and that it has a &#34;Blog Ideas&#34; heading. It can even be a</span>
</span></span><span class="line"><span class="cl">					 <span class="c1">;; symlink pointing to the actual location of capture.org!</span>
</span></span><span class="line"><span class="cl">					 <span class="p">(</span><span class="nv">file+olp</span> <span class="s">&#34;capture.org&#34;</span> <span class="s">&#34;Notes&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					 <span class="p">(</span><span class="nb">function</span> <span class="nv">org-hugo-new-subtree-post-capture-template</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-74" class="outline-3">
<h3 id="headline-74">
toc-org目录自动生成
</h3>
<div id="outline-text-headline-74" class="outline-text-3">
<p>
<a href="https://github.com/snosov1/toc-org">toc-org</a> 插件可以在Org文件里自动生成目录，只需给一个标题行设置一个标签为 <code class="verbatim">toc</code> 或 <code class="verbatim">toc_2</code> 即可（后者只生成2层）。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">toc-org</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">org-mode</span> <span class="o">.</span> <span class="nv">toc-org-mode</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-75" class="outline-3">
<h3 id="headline-75">
ol新增链接类型
</h3>
<div id="outline-text-headline-75" class="outline-text-3">
<p>
<a href="google:Org mode">google Org mode</a></p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">ol</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:defer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-link-keep-stored-after-insertion</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">org-link-abbrev-alist</span> <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;github&#34;</span>        <span class="o">.</span> <span class="s">&#34;https://github.com/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;gitlab&#34;</span>        <span class="o">.</span> <span class="s">&#34;https://gitlab.com/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;google&#34;</span>        <span class="o">.</span> <span class="s">&#34;https://google.com/search?q=&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;baidu&#34;</span>         <span class="o">.</span> <span class="s">&#34;https://baidu.com/s?wd=&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;rfc&#34;</span>           <span class="o">.</span> <span class="s">&#34;https://tools.ietf.org/html/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;wiki&#34;</span>          <span class="o">.</span> <span class="s">&#34;https://en.wikipedia.org/wiki/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;youtube&#34;</span>       <span class="o">.</span> <span class="s">&#34;https://youtube.com/watch?v=&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							 <span class="p">(</span><span class="s">&#34;zhihu&#34;</span>         <span class="o">.</span> <span class="s">&#34;https://zhihu.com/question/&#34;</span><span class="p">))))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-76" class="outline-3">
<h3 id="headline-76">
图片粘贴
</h3>
<div id="outline-text-headline-76" class="outline-text-3">
<p>
通过 <code class="verbatim">pngpaste</code> 这个命令行工具，将系统剪贴板里的图片，输出到当前文件同名的 <code class="verbatim">assets</code> 文件夹下，然后自动在当前org文件的光标处插入图片链接，并设置图片链接的宽度属性。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">emacs</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:after</span> <span class="nv">org</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">org-mode-map</span>
</span></span><span class="line"><span class="cl">				<span class="p">(</span><span class="s">&#34;M-p&#34;</span> <span class="o">.</span> <span class="nv">my/org-insert-clipboard-image</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">my/org-insert-clipboard-image</span> <span class="p">(</span><span class="nv">width</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;create a time stamped unique-named file from the clipboard in the sub-directory
</span></span></span><span class="line"><span class="cl"><span class="s">   (%filename.assets) as the org-buffer and insert a link to this file.&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">interactive</span> <span class="p">(</span><span class="nf">list</span>
</span></span><span class="line"><span class="cl">					<span class="p">(</span><span class="nf">read-string</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;Input image width, default is 800: &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">								 <span class="no">nil</span> <span class="no">nil</span> <span class="s">&#34;800&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; 设置图片存放的文件夹位置为 `当前Org文件同名.assets&#39;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">setq</span> <span class="nv">foldername</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">file-name-base</span> <span class="p">(</span><span class="nf">buffer-file-name</span><span class="p">))</span> <span class="s">&#34;.assets/&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">foldername</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nv">mkdir</span> <span class="nv">foldername</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; 设置图片的文件名，格式为 `img_年月日_时分秒.png&#39;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">setq</span> <span class="nv">imgName</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;img_&#34;</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%Y%m%d_%H%M%S&#34;</span><span class="p">)</span> <span class="s">&#34;.png&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; 图片文件的相对路径</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">setq</span> <span class="nv">relativeFilename</span> <span class="p">(</span><span class="nf">concat</span> <span class="p">(</span><span class="nv">file-name-base</span> <span class="p">(</span><span class="nf">buffer-name</span><span class="p">))</span> <span class="s">&#34;.assets/&#34;</span> <span class="nv">imgName</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; 根据不同的操作系统设置不同的命令行工具</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nf">string-equal</span> <span class="nv">system-type</span> <span class="s">&#34;gnu/linux&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			 <span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;xclip -selection clipboard -t image/png -o &gt; &#34;</span> <span class="nv">relativeFilename</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">			<span class="p">((</span><span class="nf">string-equal</span> <span class="nv">system-type</span> <span class="s">&#34;darwin&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			 <span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;pngpaste &#34;</span> <span class="nv">relativeFilename</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; 给粘贴好的图片链接加上宽度属性，方便导出</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;\n#+DOWNLOADED: screenshot @ &#34;</span>
</span></span><span class="line"><span class="cl">					  <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">&#34;%Y-%m-%d %a %H:%M:%S&#34;</span> <span class="p">(</span><span class="nf">current-time</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">					  <span class="s">&#34;\n#+CAPTION: \n#+ATTR_ORG: :width &#34;</span>
</span></span><span class="line"><span class="cl">					  <span class="nv">width</span>
</span></span><span class="line"><span class="cl">					  <span class="s">&#34;\n#+ATTR_LATEX: :width &#34;</span>
</span></span><span class="line"><span class="cl">					  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">&gt;=</span> <span class="p">(</span><span class="nf">/</span> <span class="p">(</span><span class="nf">string-to-number</span> <span class="nv">width</span><span class="p">)</span> <span class="mf">800.0</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">						  <span class="s">&#34;1.0&#34;</span>
</span></span><span class="line"><span class="cl">						<span class="p">(</span><span class="nf">number-to-string</span> <span class="p">(</span><span class="nf">/</span> <span class="p">(</span><span class="nf">string-to-number</span> <span class="nv">width</span><span class="p">)</span> <span class="mf">800.0</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">					  <span class="s">&#34;\\linewidth :float nil\n&#34;</span>
</span></span><span class="line"><span class="cl">					  <span class="s">&#34;#+ATTR_HTML: :width &#34;</span>
</span></span><span class="line"><span class="cl">					  <span class="nv">width</span>
</span></span><span class="line"><span class="cl">					  <span class="s">&#34;\n[[file:&#34;</span> <span class="nv">relativeFilename</span> <span class="s">&#34;]]\n&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; 重新显示一下图片</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">org-redisplay-inline-images</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-77" class="outline-3">
<h3 id="headline-77">
init-org.el 文件尾
</h3>
<div id="outline-text-headline-77" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-org</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-org.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-78" class="outline-2">
<h2 id="headline-78">
init-completion.el
</h2>
<div id="outline-text-headline-78" class="outline-text-2">
<p>
Emacs的补全设置。</p>
<div id="outline-container-headline-79" class="outline-3">
<h3 id="headline-79">
init-completion.el 文件头
</h3>
<div id="outline-text-headline-79" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-completion.el --- Completion settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-80" class="outline-3">
<h3 id="headline-80">
vertico 提供了一个垂直样式的补全系统
</h3>
<div id="outline-text-headline-80" class="outline-text-3">
<p>
<a href="https://github.com/minad/vertico">vertico</a> 插件提供了一个垂直样式的补全系统。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">vertico</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">vertico-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">minibuffer-local-map</span>
</span></span><span class="line"><span class="cl">				<span class="p">(</span><span class="s">&#34;M-&lt;DEL&gt;&#34;</span> <span class="o">.</span> <span class="nv">my/minibuffer-backward-kill</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="nb">:map</span> <span class="nv">vertico-map</span>
</span></span><span class="line"><span class="cl">				<span class="p">(</span><span class="s">&#34;M-q&#34;</span> <span class="o">.</span> <span class="nv">vertico-quick-insert</span><span class="p">))</span> <span class="c1">; use C-g to exit</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">my/minibuffer-backward-kill</span> <span class="p">(</span><span class="nv">arg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;When minibuffer is completing a file name delete up to parent
</span></span></span><span class="line"><span class="cl"><span class="s">  folder, otherwise delete a word&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;p&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">if</span> <span class="nv">minibuffer-completing-file-name</span>
</span></span><span class="line"><span class="cl">		  <span class="c1">;; Borrowed from https://github.com/raxod502/selectrum/issues/498#issuecomment-803283608</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">string-match-p</span> <span class="s">&#34;/.&#34;</span> <span class="p">(</span><span class="nf">minibuffer-contents</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			  <span class="p">(</span><span class="nv">zap-up-to-char</span> <span class="p">(</span><span class="nf">-</span> <span class="nv">arg</span><span class="p">)</span> <span class="sc">?/</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">delete-minibuffer-contents</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nv">backward-kill-word</span> <span class="nv">arg</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; Do not allow the cursor in the minibuffer prompt</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">minibuffer-prompt-properties</span>
</span></span><span class="line"><span class="cl">		  <span class="o">&#39;</span><span class="p">(</span><span class="nv">read-only</span> <span class="no">t</span> <span class="nv">cursor-intangible</span> <span class="no">t</span> <span class="nv">face</span> <span class="nf">minibuffer-prompt</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;minibuffer-setup-hook</span> <span class="nf">#&#39;</span><span class="nv">cursor-intangible-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">vertico-cycle</span> <span class="no">t</span><span class="p">)</span>                <span class="c1">; cycle from last to first</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">vertico-count</span> <span class="mi">15</span><span class="p">)</span>                    <span class="c1">; number of candidates to display, default is 10</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-81" class="outline-3">
<h3 id="headline-81">
orderless 插件提供一种无序的补全新姿势，将一个搜索的范式变成数个以空格分隔的部分
</h3>
<div id="outline-text-headline-81" class="outline-text-3">
<p>
<a href="https://github.com/oantolin/orderless">oderless</a> 插件提供一种无序的补全新姿势，将一个搜索的范式变成数个以空格分隔的部分，各部分之间没有顺序，你要做的就是根据记忆输入关键词、空格、关键词。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; support Pinyin first character match for orderless, avy etc.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">pinyinlib</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; orderless 是一种哲学思想</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">orderless</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">completion-styles</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">orderless</span> <span class="nv">partial-completion</span> <span class="nv">basic</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">orderless-component-separator</span> <span class="s">&#34;[ &amp;]&#34;</span><span class="p">)</span> <span class="c1">; &amp; is for company because space will break completion</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">completion-category-defaults</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">completion-category-overrides</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; make completion support pinyin, refer to</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; https://emacs-china.org/t/vertico/17913/2</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">completion--regex-pinyin</span> <span class="p">(</span><span class="nv">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">orderless-regexp</span> <span class="p">(</span><span class="nv">pinyinlib-build-regexp-string</span> <span class="nv">str</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;orderless-matching-styles</span> <span class="ss">&#39;completion--regex-pinyin</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-82" class="outline-3">
<h3 id="headline-82">
marginalia 给迷你缓冲区的补全候选条目添加一些提示
</h3>
<div id="outline-text-headline-82" class="outline-text-3">
<p>
<a href="https://github.com/minad/marginalia">marginalia</a> 插件给迷你缓冲区的补全候选条目添加一些提示。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; minibuffer helpful annotations</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">marginalia</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">marginalia-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">marginalia-annotators</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">marginalia-annotators-heavy</span> <span class="nv">marginalia-annotators-light</span> <span class="no">nil</span><span class="p">)))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-83" class="outline-3">
<h3 id="headline-83">
consult 基于Emacs自带的补全机制，提供了一系列的补全命令
</h3>
<div id="outline-text-headline-83" class="outline-text-3">
<p>
<a href="https://github.com/minad/consult">consult</a> 插件基于Emacs自带的补全机制，提供了一系列的补全命令。</p>
<blockquote>
<p>For locate on MacOS:</p>
<ol>
<li><code class="verbatim">locate</code> is not enabled in MacOS by default. We need to enable it via:
sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.locate.plist</li>
<li>Then we need to wait <code class="verbatim">locate</code> to build db for the whole file system.</li>
<li>If there is something wrong with updating locate db, we can update it manually via:
chomd 755 ~/Library ~/Downloads ~/Documents ~/Desktop
sudo /usr/libexec/locate.updatedb</li>
</ol>
</blockquote>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">consult</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:after</span> <span class="nv">org</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(([</span><span class="nv">remap</span> <span class="nv">goto-line</span><span class="p">]</span>                     <span class="o">.</span> <span class="nv">consult-goto-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">isearch-forward</span><span class="p">]</span>               <span class="o">.</span> <span class="nv">consult-line-symbol-at-point</span><span class="p">)</span> <span class="c1">; my-consult-ripgrep-or-line</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">switch-to-buffer</span><span class="p">]</span>              <span class="o">.</span> <span class="nv">consult-buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">switch-to-buffer-other-window</span><span class="p">]</span> <span class="o">.</span> <span class="nv">consult-buffer-other-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">switch-to-buffer-other-frame</span><span class="p">]</span>  <span class="o">.</span> <span class="nv">consult-buffer-other-frame</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">yank-pop</span><span class="p">]</span>                      <span class="o">.</span> <span class="nv">consult-yank-pop</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">apropos</span><span class="p">]</span>                       <span class="o">.</span> <span class="nv">consult-apropos</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">bookmark-jump</span><span class="p">]</span>                 <span class="o">.</span> <span class="nv">consult-bookmark</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">goto-line</span><span class="p">]</span>                     <span class="o">.</span> <span class="nv">consult-goto-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">imenu</span><span class="p">]</span>                         <span class="o">.</span> <span class="nv">consult-imenu</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">multi-occur</span><span class="p">]</span>                   <span class="o">.</span> <span class="nv">consult-multi-occur</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">recentf-open-files</span><span class="p">]</span>            <span class="o">.</span> <span class="nv">consult-recent-file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-x j&#34;</span>                               <span class="o">.</span> <span class="nv">consult-mark</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c g&#34;</span>                               <span class="o">.</span> <span class="nv">consult-ripgrep</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c f&#34;</span>                               <span class="o">.</span> <span class="nv">consult-find</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;\e\ef&#34;</span>                               <span class="o">.</span> <span class="nv">consult-locate</span><span class="p">)</span> <span class="c1">; need to enable locate first</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c n h&#34;</span>                             <span class="o">.</span> <span class="nv">my/consult-find-org-headings</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">org-mode-map</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c C-j&#34;</span>                             <span class="o">.</span> <span class="nv">consult-org-heading</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">minibuffer-local-map</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-r&#34;</span>                                 <span class="o">.</span> <span class="nv">consult-history</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">isearch-mode-map</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-;&#34;</span>                                 <span class="o">.</span> <span class="nv">consult-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">prog-mode-map</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-c C-j&#34;</span>                             <span class="o">.</span> <span class="nv">consult-outline</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">completion-list-mode</span> <span class="o">.</span> <span class="nv">consult-preview-at-point-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; Optionally configure the register formatting. This improves the register</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; preview for `consult-register&#39;, `consult-register-load&#39;,</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; `consult-register-store&#39; and the Emacs built-ins.</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">register-preview-delay</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">		  <span class="nv">register-preview-function</span> <span class="nf">#&#39;</span><span class="nv">consult-register-format</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; Optionally tweak the register preview window.</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; This adds thin lines, sorting and hides the mode line of the window.</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">advice-add</span> <span class="nf">#&#39;</span><span class="nv">register-preview</span> <span class="nb">:override</span> <span class="nf">#&#39;</span><span class="nv">consult-register-window</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; Use Consult to select xref locations with preview</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">xref-show-xrefs-function</span> <span class="nf">#&#39;</span><span class="nv">consult-xref</span>
</span></span><span class="line"><span class="cl">		  <span class="nv">xref-show-definitions-function</span> <span class="nf">#&#39;</span><span class="nv">consult-xref</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; MacOS locate doesn&#39;t support `--ignore-case --existing&#39; args.</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">consult-locate-args</span> <span class="p">(</span><span class="nb">pcase</span> <span class="nv">system-type</span>
</span></span><span class="line"><span class="cl">								<span class="p">(</span><span class="ss">&#39;gnu/linux</span> <span class="s">&#34;locate --ignore-case --existing --regex&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">								<span class="p">(</span><span class="ss">&#39;darwin</span> <span class="s">&#34;mdfind -name&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">consult-customize</span>
</span></span><span class="line"><span class="cl">	 <span class="nv">consult-theme</span>
</span></span><span class="line"><span class="cl">	 <span class="nb">:preview-key</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">:debounce</span> <span class="mf">0.2</span> <span class="nv">any</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	 <span class="nv">consult-ripgrep</span> <span class="nv">consult-git-grep</span> <span class="nv">consult-grep</span>
</span></span><span class="line"><span class="cl">	 <span class="nv">consult-bookmark</span> <span class="nv">consult-recent-file</span> <span class="nv">consult-xref</span>
</span></span><span class="line"><span class="cl">	 <span class="nv">consult--source-recent-file</span> <span class="nv">consult--source-project-recent-file</span> <span class="nv">consult--source-bookmark</span>
</span></span><span class="line"><span class="cl">	 <span class="nb">:preview-key</span> <span class="o">&#39;</span><span class="p">(</span><span class="nb">:debounce</span> <span class="mf">0.4</span> <span class="nv">any</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; Optionally configure the narrowing key.</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; Both &lt; and C-+ work reasonably well.</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">consult-narrow-key</span> <span class="s">&#34;&lt;&#34;</span><span class="p">)</span> <span class="c1">;; (kbd &#34;C-+&#34;)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;projectile-project-root</span> <span class="s">&#34;projectile&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">consult-project-root-function</span> <span class="nf">#&#39;</span><span class="nv">projectile-project-root</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; search all org file headings under a directory, see:</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; https://emacs-china.org/t/org-files-heading-entry/20830/4</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">my/consult-find-org-headings</span> <span class="p">(</span><span class="kp">&amp;optional</span> <span class="nv">match</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;find headngs in all org files.&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">consult-org-heading</span> <span class="nv">match</span> <span class="p">(</span><span class="nf">directory-files</span> <span class="nv">org-directory</span> <span class="no">t</span> <span class="s">&#34;^[0-9]\\{8\\}.+\\.org$&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; Use `consult-ripgrep&#39; instead of `consult-line&#39; in large buffers</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">consult-line-symbol-at-point</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;Consult line the synbol where the point is&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">consult-line</span> <span class="p">(</span><span class="nv">thing-at-point</span> <span class="ss">&#39;symbol</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-84" class="outline-3">
<h3 id="headline-84">
company Emacs最广为使用的补全插件
</h3>
<div id="outline-text-headline-84" class="outline-text-3">
<p>
Emacs最广为使用的补全插件便是 <a href="https://company-mode.github.io/">company-mode</a>，其官方主页上已有详细的说明。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">company</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:defer</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span> <span class="p">(</span><span class="nv">global-company-mode</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">company-minimum-prefix-length</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">company-tooltip-align-annotations</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">company-idle-delay</span> <span class="mf">0.0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">company-show-numbers</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">company-selection-wrap-around</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">company-transformers</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">company-sort-by-occurrence</span><span class="p">)))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-85" class="outline-3">
<h3 id="headline-85">
yasnippet模板补全
</h3>
<div id="outline-text-headline-85" class="outline-text-3">
<p>
<a href="https://github.com/joaotavora/yasnippet">yasnippet</a> 插件是一个非常强大的模板补全系统。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; yasnippet settings</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">yasnippet</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:diminish</span> <span class="nv">yas-minor-mode</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">((</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">yas-reload-all</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">((</span><span class="nv">prog-mode</span> <span class="nv">LaTeX-mode</span> <span class="nv">org-mode</span><span class="p">)</span> <span class="o">.</span> <span class="nv">yas-minor-mode</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; Suppress warning for yasnippet code.</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;warnings</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;warning-suppress-types</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">yasnippet</span> <span class="nv">backquote-change</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">yas-prompt-functions</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">yas-x-prompt</span> <span class="nv">yas-dropdown-prompt</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">smarter-yas-expand-next-field</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;Try to </span><span class="ss">`yas-expand&#39;</span><span class="s"> then </span><span class="ss">`yas-next-field&#39;</span><span class="s"> at current cursor position.&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">old-point</span> <span class="p">(</span><span class="nf">point</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">old-tick</span> <span class="p">(</span><span class="nf">buffer-chars-modified-tick</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nv">yas-expand</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">eq</span> <span class="nv">old-point</span> <span class="p">(</span><span class="nf">point</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="nf">eq</span> <span class="nv">old-tick</span> <span class="p">(</span><span class="nf">buffer-chars-modified-tick</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nb">ignore-errors</span> <span class="p">(</span><span class="nv">yas-next-field</span><span class="p">))))))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<div id="outline-container-headline-86" class="outline-4">
<h4 id="headline-86">
css for html export
</h4>
<div id="outline-text-headline-86" class="outline-text-4">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="err">#</span> <span class="nv">-*-</span> <span class="nv">mode:</span> <span class="nv">snippet</span> <span class="nv">-*-</span>
</span></span><span class="line"><span class="cl">  <span class="err">#</span> <span class="nv">name:</span> <span class="nv">CssForHtmlExport</span>
</span></span><span class="line"><span class="cl">  <span class="err">#</span> <span class="nv">key:</span> <span class="nv">&lt;css</span>
</span></span><span class="line"><span class="cl">  <span class="err">#</span> <span class="nv">--</span>
</span></span><span class="line"><span class="cl">  <span class="o">,</span><span class="err">#</span><span class="nv">+TITLE:</span> <span class="nv">${1:</span><span class="o">`</span><span class="p">(</span><span class="nv">file-name-base</span> <span class="nf">buffer-file-name</span><span class="p">)</span><span class="o">`</span><span class="nv">}</span>
</span></span><span class="line"><span class="cl">  <span class="o">,</span><span class="err">#</span><span class="nv">+OPTIONS:</span> <span class="nv">toc:nil</span> <span class="nv">num:3</span> <span class="nv">H:4</span> <span class="nv">^:nil</span> <span class="nv">pri:t</span>
</span></span><span class="line"><span class="cl">  <span class="o">,</span><span class="err">#</span><span class="nv">+HTML_HEAD:</span> <span class="nv">&lt;link</span> <span class="nv">rel=</span><span class="s">&#34;stylesheet&#34;</span> <span class="nv">type=</span><span class="s">&#34;text/css&#34;</span> <span class="nv">href=</span><span class="s">&#34;http://gongzhitaao.org/orgcss/org.css&#34;</span><span class="nv">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nv">$0</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-87" class="outline-4">
<h4 id="headline-87">
emacslisp
</h4>
<div id="outline-text-headline-87" class="outline-text-4">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="err">#</span> <span class="nv">-*-</span> <span class="nv">mode:</span> <span class="nv">snippet</span> <span class="nv">-*-</span>
</span></span><span class="line"><span class="cl">  <span class="err">#</span> <span class="nv">name:</span> <span class="nv">emacslisp</span>
</span></span><span class="line"><span class="cl">  <span class="err">#</span> <span class="nv">key:</span> <span class="nv">&lt;el</span>
</span></span><span class="line"><span class="cl">  <span class="err">#</span> <span class="nv">--</span>
</span></span><span class="line"><span class="cl">  <span class="o">,</span><span class="err">#</span><span class="nv">+BEGIN_SRC</span> <span class="nv">emacs-lisp</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$0</span>
</span></span><span class="line"><span class="cl">  <span class="nv">\#+END_SRC</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-88" class="outline-3">
<h3 id="headline-88">
embark 插件提供了一系列的迷你缓冲区的类似右键机制的增强
</h3>
<div id="outline-text-headline-88" class="outline-text-3">
<p>
<a href="https://github.com/oantolin/embark">embark</a> 插件提供了一系列的迷你缓冲区的类似右键机制的增强。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">embark</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(([</span><span class="nv">remap</span> <span class="nv">describe-bindings</span><span class="p">]</span> <span class="o">.</span> <span class="nv">embark-bindings</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-&#39;&#34;</span> <span class="o">.</span> <span class="nv">embark-act</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">minibuffer-local-map</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">minibuffer-local-completion-map</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;TAB&#34;</span> <span class="o">.</span> <span class="nv">minibuffer-force-complete</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">embark-file-map</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;E&#34;</span> <span class="o">.</span> <span class="nv">consult-file-externally</span><span class="p">)</span>      <span class="c1">; Open file externally, or `we&#39; in Ranger</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;O&#34;</span> <span class="o">.</span> <span class="nv">consult-directory-externally</span><span class="p">)</span> <span class="c1">; Open directory externally</span>
</span></span><span class="line"><span class="cl">		   <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; Optionally replace the key help with a completing-read interface</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">prefix-help-command</span> <span class="nf">#&#39;</span><span class="nv">embark-prefix-help-command</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; Show Embark actions via which-key</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">embark-action-indicator</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">map</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">which-key--show-keymap</span> <span class="s">&#34;Embark&#34;</span> <span class="nv">map</span> <span class="no">nil</span> <span class="no">nil</span> <span class="ss">&#39;no-paging</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="nf">#&#39;</span><span class="nv">which-key--hide-popup-ignore-command</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		  <span class="nv">embark-become-indicator</span> <span class="nv">embark-action-indicator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; open directory</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">consult-directory-externally</span> <span class="p">(</span><span class="nv">file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;Open directory externally using the default application of the system.&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;fOpen externally: &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">eq</span> <span class="nv">system-type</span> <span class="ss">&#39;windows-nt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			   <span class="p">(</span><span class="nf">fboundp</span> <span class="ss">&#39;w32-shell-execute</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nv">shell-command-to-string</span> <span class="p">(</span><span class="nf">encode-coding-string</span> <span class="p">(</span><span class="nv">replace-regexp-in-string</span> <span class="s">&#34;/&#34;</span> <span class="s">&#34;\\\\&#34;</span>
</span></span><span class="line"><span class="cl">																				   <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;explorer.exe %s&#34;</span> <span class="p">(</span><span class="nf">file-name-directory</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="nv">file</span><span class="p">))))</span> <span class="ss">&#39;gbk</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">call-process</span> <span class="p">(</span><span class="nb">pcase</span> <span class="nv">system-type</span>
</span></span><span class="line"><span class="cl">						<span class="p">(</span><span class="ss">&#39;darwin</span> <span class="s">&#34;open&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">						<span class="p">(</span><span class="ss">&#39;cygwin</span> <span class="s">&#34;cygstart&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">						<span class="p">(</span><span class="nv">_</span> <span class="s">&#34;xdg-open&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">					  <span class="no">nil</span> <span class="mi">0</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">					  <span class="p">(</span><span class="nf">file-name-directory</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="nv">file</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; Hide the mode line of the Embark live/completions buffers</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;display-buffer-alist</span>
</span></span><span class="line"><span class="cl">				 <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;\\`\\*Embark Collect \\(Live\\|Completions\\)\\*&#34;</span>
</span></span><span class="line"><span class="cl">				   <span class="no">nil</span>
</span></span><span class="line"><span class="cl">				   <span class="p">(</span><span class="nf">window-parameters</span> <span class="p">(</span><span class="nv">mode-line-format</span> <span class="o">.</span> <span class="nv">none</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">embark-consult</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">embark-collect-mode</span> <span class="o">.</span> <span class="nv">consult-preview-at-point-mode</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-89" class="outline-3">
<h3 id="headline-89">
init-completion.el 文件尾
</h3>
<div id="outline-text-headline-89" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-completion</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-completion.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-90" class="outline-2">
<h2 id="headline-90">
init-dired.el
</h2>
<div id="outline-text-headline-90" class="outline-text-2">
<p>
Emacs文件管理设置。</p>
<div id="outline-container-headline-91" class="outline-3">
<h3 id="headline-91">
init-dired.el 文件头
</h3>
<div id="outline-text-headline-91" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-dired.el --- Dired settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-92" class="outline-3">
<h3 id="headline-92">
init-dired.el 文件尾
</h3>
<div id="outline-text-headline-92" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-dired</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-dired.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-93" class="outline-2">
<h2 id="headline-93">
init-tools.el
</h2>
<div id="outline-text-headline-93" class="outline-text-2">
<div id="outline-container-headline-94" class="outline-3">
<h3 id="headline-94">
init-tools.el 文件头
</h3>
<div id="outline-text-headline-94" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-tools.el --- Tools settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary: Useful tools to make Emacs efficient!</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-95" class="outline-3">
<h3 id="headline-95">
helpful帮助增强
</h3>
<div id="outline-text-headline-95" class="outline-text-3">
<p>
<a href="https://github.com/Wilfred/helpful">helpful</a> 插件提供了帮助增强。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">helpful</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:commands</span> <span class="p">(</span><span class="nv">helpful-callable</span> <span class="nv">helpful-variable</span> <span class="nv">helpful-command</span> <span class="nv">helpful-key</span> <span class="nv">helpful-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(([</span><span class="nv">remap</span> <span class="nv">describe-command</span><span class="p">]</span> <span class="o">.</span> <span class="nv">helpful-command</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-h f&#34;</span> <span class="o">.</span> <span class="nv">helpful-callable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-h v&#34;</span> <span class="o">.</span> <span class="nv">helpful-variable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-h s&#34;</span> <span class="o">.</span> <span class="nv">helpful-symbol</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-h S&#34;</span> <span class="o">.</span> <span class="nv">describe-syntax</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-h m&#34;</span> <span class="o">.</span> <span class="nv">describe-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;C-h F&#34;</span> <span class="o">.</span> <span class="nv">describe-face</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">([</span><span class="nv">remap</span> <span class="nv">describe-key</span><span class="p">]</span> <span class="o">.</span> <span class="nv">helpful-key</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-96" class="outline-3">
<h3 id="headline-96">
pass密码管理
</h3>
<div id="outline-text-headline-96" class="outline-text-3">
<p>
通过 <a href="https://github.com/NicolasPetton/pass">pass</a> 插件来进行密码管理。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">pass</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:commands</span> <span class="p">(</span><span class="nv">pass</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-97" class="outline-3">
<h3 id="headline-97">
cnfonts 用于缩放字体
</h3>
<div id="outline-text-headline-97" class="outline-text-3">
<p>
cnfonts 原来叫: chinese-fonts-setup, 是一个 Emacs 中英文字体配置工 具。可以比较方便地实现中文字体和英文字体等宽（也就是大家常说的中英 文对齐）。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">cnfonts</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:defer</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:init</span> <span class="p">(</span><span class="nv">cnfonts-mode</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nf">define-key</span> <span class="nv">cnfonts-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C--&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">cnfonts-decrease-fontsize</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nf">define-key</span> <span class="nv">cnfonts-mode-map</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-=&#34;</span><span class="p">)</span> <span class="nf">#&#39;</span><span class="nv">cnfonts-increase-fontsize</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-98" class="outline-3">
<h3 id="headline-98">
bhj-fonts字体配置
</h3>
<div id="outline-text-headline-98" class="outline-text-3">
<p>
参考链接</p>
<p>
<a href="https://baohaojun.github.io/perfect-emacs-chinese-font.html">狠狠地折腾了一把Emacs中文字体</a></p>
<p>
<a href="https://baohaojun.github.io/blog/2013/05/09/0-emacs-font-global-scaling.html">全局放大Emacs字体</a></p>
<p>
<a href="https://raw.githubusercontent.com/baohaojun/system-config/master/.emacs_d/lisp/bhj-fonts.el">bhj-fonts</a></p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">qiang-font-existsp</span> <span class="p">(</span><span class="nv">font</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">null</span> <span class="p">(</span><span class="nf">x-list-fonts</span> <span class="nv">font</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="no">nil</span> <span class="no">t</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">qiang-make-font-string</span> <span class="p">(</span><span class="nv">font-name</span> <span class="nv">font-size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">stringp</span> <span class="nv">font-size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			 <span class="p">(</span><span class="nf">equal</span> <span class="s">&#34;:&#34;</span> <span class="p">(</span><span class="nf">string</span> <span class="p">(</span><span class="nf">elt</span> <span class="nv">font-size</span> <span class="mi">0</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%s%s&#34;</span> <span class="nv">font-name</span> <span class="nv">font-size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%s-%s&#34;</span> <span class="nv">font-name</span> <span class="nv">font-size</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">bhj-english-font-size</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">qiang-set-font</span> <span class="p">(</span><span class="nv">english-fonts</span>
</span></span><span class="line"><span class="cl">						 <span class="nv">english-font-size</span>
</span></span><span class="line"><span class="cl">						 <span class="nv">chinese-fonts</span>
</span></span><span class="line"><span class="cl">						 <span class="kp">&amp;optional</span> <span class="nv">chinese-fonts-scale</span>
</span></span><span class="line"><span class="cl">						 <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">chinese-fonts-scale</span> <span class="p">(</span><span class="nb">or</span> <span class="nv">chinese-fonts-scale</span> <span class="mf">1.2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">save-excursion</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">with-current-buffer</span> <span class="p">(</span><span class="nv">find-file-noselect</span> <span class="s">&#34;~/.config/system-config/emacs-font-size&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">delete-region</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-max</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%s&#34;</span> <span class="nv">english-font-size</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">before-save-hook</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			  <span class="p">(</span><span class="nv">after-save-hook</span> <span class="no">nil</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nv">save-buffer</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">kill-buffer</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">face-font-rescale-alist</span> <span class="o">`</span><span class="p">((</span><span class="s">&#34;Microsoft Yahei&#34;</span> <span class="o">.</span> <span class="o">,</span><span class="nv">chinese-fonts-scale</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">									<span class="p">(</span><span class="s">&#34;Microsoft_Yahei&#34;</span> <span class="o">.</span> <span class="o">,</span><span class="nv">chinese-fonts-scale</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">									<span class="p">(</span><span class="s">&#34;微软雅黑&#34;</span> <span class="o">.</span> <span class="o">,</span><span class="nv">chinese-fonts-scale</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">									<span class="p">(</span><span class="s">&#34;WenQuanYi Zen Hei&#34;</span> <span class="o">.</span> <span class="o">,</span><span class="nv">chinese-fonts-scale</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;english-font-size could be set to \&#34;:pixelsize=18\&#34; or a integer.
</span></span></span><span class="line"><span class="cl"><span class="s">  If set/leave chinese-font-size to nil, it will follow english-font-size&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;cl</span><span class="p">)</span>                         <span class="c1">; for find if</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">bhj-english-font-size</span> <span class="nv">english-font-size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">en-font</span> <span class="p">(</span><span class="nv">qiang-make-font-string</span>
</span></span><span class="line"><span class="cl">					<span class="p">(</span><span class="nv">find-if</span> <span class="nf">#&#39;</span><span class="nv">qiang-font-existsp</span> <span class="nv">english-fonts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nv">english-font-size</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nv">zh-font</span> <span class="p">(</span><span class="nf">font-spec</span> <span class="nb">:family</span> <span class="p">(</span><span class="nv">find-if</span> <span class="nf">#&#39;</span><span class="nv">qiang-font-existsp</span> <span class="nv">chinese-fonts</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	  <span class="c1">;; Set the default English font</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;;</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; The following 2 method cannot make the font settig work in new frames.</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; (set-default-font &#34;Consolas:pixelsize=18&#34;)</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; (add-to-list &#39;default-frame-alist &#39;(font . &#34;Consolas:pixelsize=18&#34;))</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; We have to use set-face-attribute</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">set-face-attribute</span>
</span></span><span class="line"><span class="cl">	   <span class="ss">&#39;default</span> <span class="no">nil</span> <span class="nb">:font</span> <span class="nv">en-font</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">condition-case</span> <span class="nv">font-error</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nb">progn</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">set-face-font</span> <span class="ss">&#39;italic</span> <span class="p">(</span><span class="nf">font-spec</span> <span class="nb">:family</span> <span class="s">&#34;JetBrains Mono&#34;</span> <span class="nb">:slant</span> <span class="ss">&#39;italic</span> <span class="nb">:weight</span> <span class="ss">&#39;normal</span> <span class="nb">:size</span> <span class="p">(</span><span class="nf">+</span> <span class="mf">0.0</span> <span class="nv">english-font-size</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">set-face-font</span> <span class="ss">&#39;bold-italic</span> <span class="p">(</span><span class="nf">font-spec</span> <span class="nb">:family</span> <span class="s">&#34;JetBrains Mono&#34;</span> <span class="nb">:slant</span> <span class="ss">&#39;italic</span> <span class="nb">:weight</span> <span class="ss">&#39;bold</span> <span class="nb">:size</span> <span class="p">(</span><span class="nf">+</span> <span class="mf">0.0</span> <span class="nv">english-font-size</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nf">set-fontset-font</span> <span class="no">t</span> <span class="ss">&#39;symbol</span> <span class="p">(</span><span class="nf">font-spec</span> <span class="nb">:family</span> <span class="s">&#34;JetBrains Mono&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="ne">error</span> <span class="no">nil</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nf">set-fontset-font</span> <span class="no">t</span> <span class="ss">&#39;symbol</span> <span class="p">(</span><span class="nf">font-spec</span> <span class="nb">:family</span> <span class="s">&#34;Unifont&#34;</span><span class="p">)</span> <span class="no">nil</span> <span class="ss">&#39;append</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nf">set-fontset-font</span>
</span></span><span class="line"><span class="cl">	   <span class="no">t</span> <span class="o">&#39;</span><span class="p">(</span><span class="mh">#x2009</span> <span class="o">.</span> <span class="mh">#x2009</span><span class="p">)</span> <span class="p">(</span><span class="nf">font-spec</span> <span class="nb">:family</span> <span class="s">&#34;B&amp;H LucidaBright&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nf">set-fontset-font</span> <span class="no">t</span> <span class="no">nil</span> <span class="p">(</span><span class="nf">font-spec</span> <span class="nb">:family</span> <span class="s">&#34;DejaVu Sans&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	  <span class="c1">;; Set Chinese font</span>
</span></span><span class="line"><span class="cl">	  <span class="c1">;; Do not use &#39;unicode charset, it will cause the english font setting invalid</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">charset</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">kana</span> <span class="nv">han</span> <span class="nv">cjk-misc</span> <span class="nv">bopomofo</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">set-fontset-font</span> <span class="no">t</span> <span class="nv">charset</span> <span class="nv">zh-font</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">boundp</span> <span class="ss">&#39;global-emojify-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			   <span class="nv">global-emojify-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">global-emojify-mode</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">shell-command-to-string</span> <span class="s">&#34;setsid sawfish-client -e &#39;(maximize-window (input-focus))&#39;&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">bhj-english-fonts</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;JetBrains Mono&#34;</span> <span class="s">&#34;Monaco&#34;</span> <span class="s">&#34;Consolas&#34;</span> <span class="s">&#34;DejaVu Sans Mono&#34;</span> <span class="s">&#34;Monospace&#34;</span> <span class="s">&#34;Courier New&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">bhj-chinese-fonts</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;Microsoft Yahei&#34;</span> <span class="s">&#34;Microsoft_Yahei&#34;</span> <span class="s">&#34;微软雅黑&#34;</span> <span class="s">&#34;文泉驿等宽微米黑&#34;</span> <span class="s">&#34;黑体&#34;</span> <span class="s">&#34;新宋体&#34;</span> <span class="s">&#34;宋体&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">qiang-set-font</span>
</span></span><span class="line"><span class="cl">   <span class="nv">bhj-english-fonts</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="s">&#34;~/.config/system-config/emacs-font-size&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	   <span class="p">(</span><span class="nb">save-excursion</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nv">find-file</span> <span class="s">&#34;~/.config/system-config/emacs-font-size&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nf">point-min</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		 <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">monaco-font-size</span> <span class="p">(</span><span class="nf">read</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="nf">kill-buffer</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">numberp</span> <span class="nv">monaco-font-size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			   <span class="nv">monaco-font-size</span>
</span></span><span class="line"><span class="cl">			 <span class="mf">12.5</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	 <span class="mf">12.5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="nv">bhj-chinese-fonts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">chinese-font-size-scale-alist</span> <span class="no">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; On different platforms, I need to set different scaling rate for</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; differnt font size.</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">cond</span>
</span></span><span class="line"><span class="cl">   <span class="p">((</span><span class="nb">and</span> <span class="p">(</span><span class="nf">boundp</span> <span class="ss">&#39;*is-a-mac*</span><span class="p">)</span> <span class="vg">*is-a-mac*</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">chinese-font-size-scale-alist</span> <span class="o">&#39;</span><span class="p">((</span><span class="mf">10.5</span> <span class="o">.</span> <span class="mf">1.3</span><span class="p">)</span> <span class="p">(</span><span class="mf">11.5</span> <span class="o">.</span> <span class="mf">1.3</span><span class="p">)</span> <span class="p">(</span><span class="mi">16</span> <span class="o">.</span> <span class="mf">1.3</span><span class="p">)</span> <span class="p">(</span><span class="mi">18</span> <span class="o">.</span> <span class="mf">1.25</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">   <span class="p">((</span><span class="nb">and</span> <span class="p">(</span><span class="nf">boundp</span> <span class="ss">&#39;*is-a-win*</span><span class="p">)</span> <span class="vg">*is-a-win*</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">chinese-font-size-scale-alist</span> <span class="o">&#39;</span><span class="p">((</span><span class="mf">11.5</span> <span class="o">.</span> <span class="mf">1.25</span><span class="p">)</span> <span class="p">(</span><span class="mi">16</span> <span class="o">.</span> <span class="mf">1.25</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="no">t</span> <span class="c1">;; is a linux:-)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">chinese-font-size-scale-alist</span> <span class="o">&#39;</span><span class="p">((</span><span class="mi">12</span> <span class="o">.</span> <span class="mf">1.25</span><span class="p">)</span> <span class="p">(</span><span class="mf">12.5</span> <span class="o">.</span> <span class="mf">1.25</span><span class="p">)</span> <span class="p">(</span><span class="mi">14</span> <span class="o">.</span> <span class="mf">1.20</span><span class="p">)</span> <span class="p">(</span><span class="mi">16</span> <span class="o">.</span> <span class="mf">1.25</span><span class="p">)</span> <span class="p">(</span><span class="mi">20</span> <span class="o">.</span> <span class="mf">1.20</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">bhj-english-font-size-steps</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">9</span> <span class="mf">10.5</span> <span class="mf">11.5</span> <span class="mi">12</span> <span class="mf">12.5</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">16</span> <span class="mi">18</span> <span class="mi">20</span> <span class="mi">22</span> <span class="mi">40</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">defun</span> <span class="nv">bhj-step-frame-font-size</span> <span class="p">(</span><span class="nv">step</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">steps</span> <span class="nv">bhj-english-font-size-steps</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		  <span class="nv">next-size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nf">&lt;</span> <span class="nv">step</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">setq</span> <span class="nv">steps</span> <span class="p">(</span><span class="nf">reverse</span> <span class="nv">bhj-english-font-size-steps</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">setq</span> <span class="nv">next-size</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">cadr</span> <span class="p">(</span><span class="nf">member</span> <span class="nv">bhj-english-font-size</span> <span class="nv">steps</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">when</span> <span class="nv">next-size</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nv">qiang-set-font</span> <span class="nv">bhj-english-fonts</span> <span class="nv">next-size</span> <span class="nv">bhj-chinese-fonts</span> <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="nv">next-size</span> <span class="nv">chinese-font-size-scale-alist</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">message</span> <span class="s">&#34;Your font size is set to %.1f&#34;</span> <span class="nv">next-size</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; (global-set-key (kbd &#34;C-x M--&#34;) (lambda () (interactive) (bhj-step-frame-font-size -1)))</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; (global-set-key (kbd &#34;C-x M-=&#34;) (lambda () (interactive) (bhj-step-frame-font-size 1)))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C--&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span> <span class="p">(</span><span class="nv">bhj-step-frame-font-size</span> <span class="mi">-1</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&#34;C-=&#34;</span><span class="p">)</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span> <span class="p">(</span><span class="nv">bhj-step-frame-font-size</span> <span class="mi">1</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nv">set-face-attribute</span> <span class="ss">&#39;default</span> <span class="no">nil</span> <span class="nb">:font</span> <span class="p">(</span><span class="nf">font-spec</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;; {%org-mode%}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; here are 20 hanzi and 40 english chars, see if they are the same width</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; 你你你你你你你你你你你你你你你你你你你你</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; /aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;; {%/org-mode%}</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-99" class="outline-3">
<h3 id="headline-99">
init-tools.el 文件尾
</h3>
<div id="outline-text-headline-99" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-tools</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-tools.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-100" class="outline-2">
<h2 id="headline-100">
init-rss.el
</h2>
<div id="outline-text-headline-100" class="outline-text-2">
<p>
Emacs的RSS新闻阅读设置</p>
<div id="outline-container-headline-101" class="outline-3">
<h3 id="headline-101">
init-rss.el 文件头
</h3>
<div id="outline-text-headline-101" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-rss.el --- RSS settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-102" class="outline-3">
<h3 id="headline-102">
elfeed 一个非常棒的RSS新闻阅读客户端
</h3>
<div id="outline-text-headline-102" class="outline-text-3">
<p>
<a href="https://github.com/skeeto/elfeed">elfeed</a> 插件是一个非常棒的RSS新闻阅读客户端。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">elfeed</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">((</span><span class="nv">elfeed-new-entry</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">elfeed-make-tagger</span> <span class="nb">:feed-url</span> <span class="s">&#34;video&#34;</span> <span class="nb">:add</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">video</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">								 <span class="p">(</span><span class="nv">elfeed-make-tagger</span> <span class="nb">:entry-title</span> <span class="s">&#34;图卦&#34;</span> <span class="nb">:add</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">pic</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">((</span><span class="s">&#34;C-x M-r&#34;</span> <span class="o">.</span> <span class="nv">elfeed</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">elfeed-search-mode-map</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;g&#34;</span> <span class="o">.</span> <span class="nv">elfeed-update</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;G&#34;</span> <span class="o">.</span> <span class="nv">elfeed-search-update--force</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;o&#34;</span> <span class="o">.</span> <span class="nv">elfeed-default-browser-open</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">elfeed-show-mode-map</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;M-v&#34;</span> <span class="o">.</span> <span class="nv">scroll-down-command</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;j&#34;</span> <span class="o">.</span> <span class="nv">scroll-up-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;k&#34;</span> <span class="o">.</span> <span class="nv">scroll-down-line</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">elfeed-db-directory</span> <span class="s">&#34;~/.elfeed&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; capture template for elfeed</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">with-eval-after-load</span> <span class="ss">&#39;org-capture</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-capture-templates</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;r&#34;</span> <span class="s">&#34;Elfeed RSS&#34;</span> <span class="nv">entry</span> <span class="p">(</span><span class="nv">file+headline</span> <span class="s">&#34;capture.org&#34;</span> <span class="s">&#34;Elfeed&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">											<span class="s">&#34;* %:elfeed-entry-title :READ:\n%?\n%a&#34;</span>
</span></span><span class="line"><span class="cl">											<span class="nb">:empty-lines-after</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">											<span class="nb">:prepend</span> <span class="no">t</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;org-capture-templates-contexts</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;r&#34;</span> <span class="p">((</span><span class="nv">in-mode</span> <span class="o">.</span> <span class="s">&#34;elfeed-show-mode&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">														  <span class="p">(</span><span class="nv">in-mode</span> <span class="o">.</span> <span class="s">&#34;elfeed-search-mode&#34;</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; ================================</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; open entry with browser</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; ================================</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">elfeed-default-browser-open</span> <span class="p">(</span><span class="kp">&amp;optional</span> <span class="nv">use-generic-p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;open with default browser&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;P&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">entries</span> <span class="p">(</span><span class="nv">elfeed-search-selected</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">cl-loop</span> <span class="nv">for</span> <span class="nv">entry</span> <span class="nv">in</span> <span class="nv">entries</span>
</span></span><span class="line"><span class="cl">				 <span class="nb">do</span> <span class="p">(</span><span class="nv">elfeed-untag</span> <span class="nv">entry</span> <span class="ss">&#39;unread</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				 <span class="nb">when</span> <span class="p">(</span><span class="nv">elfeed-entry-link</span> <span class="nv">entry</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				 <span class="nb">do</span> <span class="p">(</span><span class="nv">browse-url</span> <span class="nv">it</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">mapc</span> <span class="nf">#&#39;</span><span class="nv">elfeed-search-update-entry</span> <span class="nv">entries</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nv">use-region-p</span><span class="p">)</span> <span class="p">(</span><span class="nf">forward-line</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-feeds</span> <span class="o">&#39;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">					<span class="p">(</span><span class="s">&#34;https://planet.emacslife.com/atom.xml&#34;</span> <span class="nv">emacs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="p">(</span><span class="s">&#34;http://www.dapenti.com/blog/rss2.asp?name=xilei&#34;</span> <span class="nv">news</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="p">(</span><span class="s">&#34;https://remacs.cc/index.xml&#34;</span> <span class="nv">emacs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-use-curl</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-curl-max-connections</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-enclosure-default-dir</span> <span class="s">&#34;~/Downloads/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; (elfeed-search-filter &#34;@4-months-ago +&#34;)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-search-filter</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-sort-order</span> <span class="ss">&#39;descending</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-search-clipboard-type</span> <span class="ss">&#39;CLIPBOARD</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-search-title-max-width</span> <span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-search-title-min-width</span> <span class="mi">30</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-search-trailing-width</span> <span class="mi">25</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-show-truncate-long-urls</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-show-unique-buffers</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">elfeed-search-date-format</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;%F %R&#34;</span> <span class="mi">16</span> <span class="nb">:left</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-103" class="outline-3">
<h3 id="headline-103">
elfeed-goodies给elfeed优化增强
</h3>
<div id="outline-text-headline-103" class="outline-text-3">
<p>
我们通过 <a href="https://github.com/jeetelongname/elfeed-goodies">elfeed-goodies</a> 插件给 elfeed 进行优化增强：</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">elfeed-goodies</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">after-init</span> <span class="o">.</span> <span class="nv">elfeed-goodies/setup</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; set elfeed show entry switch function</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">elfeed-show-entry-switch</span> <span class="nf">#&#39;</span><span class="nv">elfeed-goodies/switch-pane</span><span class="p">)</span> <span class="c1">; switch-to-buffer, pop-to-buffer</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-104" class="outline-3">
<h3 id="headline-104">
init-rss.el 文件尾
</h3>
<div id="outline-text-headline-104" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-rss</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-rss.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-105" class="outline-2">
<h2 id="headline-105">
init-shell.el
</h2>
<div id="outline-text-headline-105" class="outline-text-2">
<p>
Emacs里的shell设置。</p>
<div id="outline-container-headline-106" class="outline-3">
<h3 id="headline-106">
init-shell.el 文件头
</h3>
<div id="outline-text-headline-106" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-shell.el --- (E)shell settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-107" class="outline-3">
<h3 id="headline-107">
eshell 基本配置
</h3>
<div id="outline-text-headline-107" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">eshell</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:functions</span> <span class="nv">eshell/alias</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">((</span><span class="nv">eshell-mode</span> <span class="o">.</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="nv">term-mode-common-init</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							<span class="c1">;; Remove cmd args word by word</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="nf">modify-syntax-entry</span> <span class="sc">?-</span> <span class="s">&#34;w&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="nv">visual-line-mode</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">							<span class="p">(</span><span class="nv">setenv</span> <span class="s">&#34;PAGER&#34;</span> <span class="s">&#34;cat&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		   <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">term-mode-common-init</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;The common initialization for term.&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">setq-local</span> <span class="nv">scroll-margin</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">setq-local</span> <span class="nv">truncate-lines</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; 在Emacs里输入vi，直接在buffer里打开文件</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defalias</span> <span class="ss">&#39;eshell/vi</span> <span class="ss">&#39;find-file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defalias</span> <span class="ss">&#39;eshell/vim</span> <span class="ss">&#39;find-file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; 语法高亮显示</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">eshell/bat</span> <span class="p">(</span><span class="nv">file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;cat FILE with syntax highlight.&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">with-temp-buffer</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">insert-file-contents</span> <span class="nv">file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nf">buffer-file-name</span> <span class="nv">file</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		  <span class="p">(</span><span class="nb">delay-mode-hooks</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">set-auto-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="nv">font-lock-ensure</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nf">buffer-string</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defalias</span> <span class="ss">&#39;eshell/cat</span> <span class="ss">&#39;eshell/bat</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; 交互式进入目录</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">eshell/z</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;cd to directory with completion.&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">dir</span> <span class="p">(</span><span class="nf">completing-read</span> <span class="s">&#34;Directory: &#34;</span> <span class="p">(</span><span class="nv">ring-elements</span> <span class="nv">eshell-last-dir-ring</span><span class="p">)</span> <span class="no">nil</span> <span class="no">t</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nv">eshell/cd</span> <span class="nv">dir</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">;; 查找文件</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">defun</span> <span class="nv">eshell/f</span> <span class="p">(</span><span class="nv">filename</span> <span class="kp">&amp;optional</span> <span class="nv">dir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	  <span class="s">&#34;Search for files matching FILENAME in either DIR or the
</span></span></span><span class="line"><span class="cl"><span class="s">  current directory.&#34;</span>
</span></span><span class="line"><span class="cl">	  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">cmd</span> <span class="p">(</span><span class="nf">concat</span>
</span></span><span class="line"><span class="cl">				  <span class="c1">;; using find</span>
</span></span><span class="line"><span class="cl">				  <span class="p">(</span><span class="nv">executable-find</span> <span class="s">&#34;find&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				  <span class="s">&#34; &#34;</span> <span class="p">(</span><span class="nb">or</span> <span class="nv">dir</span> <span class="s">&#34;.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				  <span class="s">&#34; -not -path &#39;*/.git*&#39;&#34;</span>            <span class="c1">; ignore .git directory</span>
</span></span><span class="line"><span class="cl">				  <span class="s">&#34; -and -not -path &#39;build&#39;&#34;</span>         <span class="c1">; ignore cmake build directory</span>
</span></span><span class="line"><span class="cl">				  <span class="s">&#34; -and -not -path &#39;*/eln-cache*&#39;&#34;</span>  <span class="c1">; ignore eln cache</span>
</span></span><span class="line"><span class="cl">				  <span class="s">&#34; -and -type f -and -iname &#34;</span>
</span></span><span class="line"><span class="cl">				  <span class="s">&#34;&#39;*&#34;</span> <span class="nv">filename</span> <span class="s">&#34;*&#39;&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">		<span class="p">(</span><span class="nv">eshell-command-result</span> <span class="nv">cmd</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-banner-message</span>
</span></span><span class="line"><span class="cl">	 <span class="o">&#39;</span><span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%s %s\n&#34;</span>
</span></span><span class="line"><span class="cl">			  <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34; %s &#34;</span> <span class="p">(</span><span class="nv">string-trim</span> <span class="p">(</span><span class="nf">buffer-name</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">						  <span class="ss">&#39;face</span> <span class="ss">&#39;mode-line-highlight</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			  <span class="p">(</span><span class="nf">propertize</span> <span class="p">(</span><span class="nf">current-time-string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">						  <span class="ss">&#39;face</span> <span class="ss">&#39;font-lock-keyword-face</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-scroll-to-bottom-on-input</span> <span class="ss">&#39;all</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-scroll-to-bottom-on-output</span> <span class="ss">&#39;all</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-kill-on-exit</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-kill-processes-on-exit</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; Don&#39;t record command in history if starts with whitespace</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-input-filter</span> <span class="ss">&#39;eshell-input-filter-initial-space</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-error-if-no-glob</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-glob-case-insensitive</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; set scripts</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-rc-script</span> <span class="p">(</span><span class="nv">locate-user-emacs-file</span> <span class="s">&#34;etc/eshell/profile&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-login-script</span> <span class="p">(</span><span class="nv">locate-user-emacs-file</span> <span class="s">&#34;etc/eshell/login&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-108" class="outline-3">
<h3 id="headline-108">
eshell alias 设置
</h3>
<div id="outline-text-headline-108" class="outline-text-3">
<div class="src src-text">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">  alias ff find-file $1
</span></span><span class="line"><span class="cl">  alias fo find-file-other-window $1
</span></span><span class="line"><span class="cl">  alias d dired $1
</span></span><span class="line"><span class="cl">  alias ll ls -alh
</span></span><span class="line"><span class="cl">  alias l. ls -dh .*
</span></span><span class="line"><span class="cl">  alias up eshell-up $1
</span></span><span class="line"><span class="cl">  alias pk eshell-up-peek $1
</span></span><span class="line"><span class="cl">  alias less view-file $1
</span></span><span class="line"><span class="cl">  alias more view-file $1</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-109" class="outline-3">
<h3 id="headline-109">
eshell 里的 C-d
</h3>
<div id="outline-text-headline-109" class="outline-text-3">
<p>
让 <code class="verbatim">C-d</code> 更智能：</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">em-rebind</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:commands</span> <span class="nv">eshell-delchar-or-maybe-eof</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">esh-mode</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(</span><span class="nb">:map</span> <span class="nv">eshell-mode-map</span>
</span></span><span class="line"><span class="cl">				<span class="p">(</span><span class="s">&#34;C-d&#34;</span> <span class="o">.</span> <span class="nv">eshell-delchar-or-maybe-eof</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">(</span><span class="s">&#34;C-r&#34;</span> <span class="o">.</span> <span class="nv">consult-history</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">(</span><span class="s">&#34;C-l&#34;</span> <span class="o">.</span> <span class="nv">eshell/clear</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-110" class="outline-3">
<h3 id="headline-110">
Eshell 的命令历史
</h3>
<div id="outline-text-headline-110" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">em-hist</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:defer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-history-size</span> <span class="mi">1024</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-hist-ignoredups</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-save-history-on-exit</span> <span class="no">t</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-111" class="outline-3">
<h3 id="headline-111">
有些命令使用 term
</h3>
<div id="outline-text-headline-111" class="outline-text-3">
<p>
有一些命令如 top，我们还是使用 term：</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;; following commands will run on term instead</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">em-term</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:defer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-visual-commands</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;top&#34;</span> <span class="s">&#34;htop&#34;</span> <span class="s">&#34;less&#34;</span> <span class="s">&#34;more&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-visual-subcommands</span> <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;git&#34;</span> <span class="s">&#34;help&#34;</span> <span class="s">&#34;lg&#34;</span> <span class="s">&#34;log&#34;</span> <span class="s">&#34;diff&#34;</span> <span class="s">&#34;show&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-visual-options</span> <span class="o">&#39;</span><span class="p">((</span><span class="s">&#34;git&#34;</span> <span class="s">&#34;--help&#34;</span> <span class="s">&#34;--paginate&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-destroy-buffer-when-process-dies</span> <span class="no">t</span><span class="p">))</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-112" class="outline-3">
<h3 id="headline-112">
eshell-git-prompt 命令行主题
</h3>
<div id="outline-text-headline-112" class="outline-text-3">
<p>
<a href="https://github.com/xuchunyang/eshell-git-prompt">eshell-git-prompt</a> 插件提供了数个好看的 Eshell 命令行主题。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">eshell-git-prompt</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:after</span> <span class="nv">esh-mode</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom-face</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-git-prompt-multiline2-dir-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#c09035&#34;</span> <span class="nb">:bold</span> <span class="no">t</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-git-prompt-use-theme</span> <span class="ss">&#39;multiline2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-113" class="outline-3">
<h3 id="headline-113">
eshell-syntax-highlighting 语法高亮
</h3>
<div id="outline-text-headline-113" class="outline-text-3">
<p>
<a href="https://github.com/akreisher/eshell-syntax-highlighting">eshell-syntax-highlighting</a> 插件为Eshell提供语法高亮。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">eshell-syntax-highlighting</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:after</span> <span class="nv">esh-mode</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">eshell-mode</span> <span class="o">.</span> <span class="nv">eshell-syntax-highlighting-global-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom-face</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">eshell-syntax-highlighting-shell-command-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#7cc77f&#34;</span> <span class="nb">:bold</span> <span class="no">t</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-114" class="outline-3">
<h3 id="headline-114">
capf-autosuggest自动补全
</h3>
<div id="outline-text-headline-114" class="outline-text-3">
<p>
<a href="https://github.com/emacsmirror/capf-autosuggest">capf-autosuggest</a> 提供Fish类似的Eshell命令自动补全功能。类似的插件还有 <a href="https://github.com/dieggsy/esh-autosuggest">esh-autosuggest</a>。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">capf-autosuggest</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">((</span><span class="nv">eshell-mode</span> <span class="nv">comint-mode</span><span class="p">)</span> <span class="o">.</span> <span class="nv">capf-autosuggest-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom-face</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">capf-autosuggest-face</span> <span class="p">((</span><span class="no">t</span> <span class="p">(</span><span class="nb">:foreground</span> <span class="s">&#34;#dae7ff&#34;</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-115" class="outline-3">
<h3 id="headline-115">
eshell-up快速进入父级文件夹
</h3>
<div id="outline-text-headline-115" class="outline-text-3">
<p>
<a href="https://github.com/peterwvj/eshell-up">eshell-up</a> 插件可以快速进入当前文件夹的任何一个父级文件夹。通过 <code class="verbatim">up</code> 命令（已经设置了up 在eshell里的alias）进入当前文件夹的任何一级父目录。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">eshell-up</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:commands</span> <span class="p">(</span><span class="nv">eshell-up</span> <span class="nv">eshell-up-peek</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="c1">;; to print the matching parent directory before changing to it</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">eshell-up-print-parent-dir</span> <span class="no">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-116" class="outline-3">
<h3 id="headline-116">
init-shell.el 文件尾
</h3>
<div id="outline-text-headline-116" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-shell</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-shell.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-117" class="outline-2">
<h2 id="headline-117">
init-browser.el
</h2>
<div id="outline-text-headline-117" class="outline-text-2">
<div id="outline-container-headline-118" class="outline-3">
<h3 id="headline-118">
init-browser.el 文件头
</h3>
<div id="outline-text-headline-118" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="c1">;;; init-browser.el --- Browser settings -*- lexical-binding: t -*-</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Commentary:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">;;; Code:</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-119" class="outline-3">
<h3 id="headline-119">
EWW 配置
</h3>
<div id="outline-text-headline-119" class="outline-text-3">
<p>
Emacs 内置 EWW 浏览器配置。</p>
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">shr</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:defer</span> <span class="no">t</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:custom</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">shr-inhibit-images</span> <span class="no">t</span><span class="p">)</span>                <span class="c1">; 不显示图片</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">shr-image-animate</span> <span class="no">nil</span><span class="p">)</span>               <span class="c1">; 不显示 gif    </span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">use-package</span> <span class="nv">eww</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:ensure</span> <span class="no">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:commands</span> <span class="nv">eww</span> <span class="nv">eww-follow-link</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:hook</span> <span class="p">(</span><span class="nv">eww-mode</span> <span class="o">.</span> <span class="nv">visual-line-mode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:bind</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">		   <span class="nb">:map</span> <span class="nv">eww-mode-map</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;o&#34;</span> <span class="o">.</span> <span class="nv">eww-browse-with-external-browser</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;D&#34;</span> <span class="o">.</span> <span class="nv">eww-forward-url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;S&#34;</span> <span class="o">.</span> <span class="nv">eww-back-url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;f&#34;</span> <span class="o">.</span> <span class="nv">link-hint-open-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;TAB&#34;</span> <span class="o">.</span> <span class="nv">shr-next-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;&lt;backtab&gt;&#34;</span> <span class="o">.</span> <span class="nv">shr-previous-link</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;j&#34;</span> <span class="o">.</span> <span class="nv">scroll-up-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">(</span><span class="s">&#34;k&#34;</span> <span class="o">.</span> <span class="nv">scroll-down-line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		   <span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">:config</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nb">setq</span> <span class="nv">eww-download-directory</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;~/Downloads&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="nv">custom-set-variables</span>  
</span></span><span class="line"><span class="cl">	 <span class="o">&#39;</span><span class="p">(</span><span class="nv">eww-search-prefix</span> <span class="s">&#34;https://cn.bing.com/search?q=&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-120" class="outline-3">
<h3 id="headline-120">
init-browser.el 文件尾
</h3>
<div id="outline-text-headline-120" class="outline-text-3">
<div class="src src-emacs-lisp">
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">provide</span> <span class="ss">&#39;init-browser</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">;;; init-browser.el ends here</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/emacs/">Emacs</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 Example Person
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
